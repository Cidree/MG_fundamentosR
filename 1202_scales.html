<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="es" xml:lang="es">

<head>

<meta charset="utf-8" />
<meta name="generator" content="quarto-1.5.41" />

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />


<title>Fundamentos de programación con R – 7  Scales</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<!-- htmldependencies:E3FAD763 -->
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "Sin resultados",
    "search-matching-documents-text": "documentos encontrados",
    "search-copy-link-title": "Copiar el enlace en la búsqueda",
    "search-hide-matches-text": "Ocultar resultados adicionales",
    "search-more-match-text": "resultado adicional en este documento",
    "search-more-matches-text": "resultados adicionales en este documento",
    "search-clear-button-title": "Borrar",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancelar",
    "search-submit-button-title": "Enviar",
    "search-label": "Buscar"
  }
}</script>
<script src="site_libs/core-js-2.5.3/shim.min.js"></script>
<script src="site_libs/react-18.2.0/react.min.js"></script>
<script src="site_libs/react-18.2.0/react-dom.min.js"></script>
<script src="site_libs/reactwidget-1.0.0/react-tools.js"></script>
<link href="site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet" />
<script src="site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
<link href="site_libs/reactable-0.4.4/reactable.css" rel="stylesheet" />
<script src="site_libs/reactable-binding-0.4.4/reactable.js"></script>


</head>

<body>

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn"
      data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" 
      aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral"
      onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <h1 class="quarto-secondary-nav-title no-breadcrumbs"></h1>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" role="link"
        aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Alternar barra lateral"
        onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Buscar" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header sidebar-header-stacked">
      <a href="/index.html" class="sidebar-logo-link">
      <img src="/assets/img/logo-geoforest.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none"/>
      </a>
    <div class="sidebar-title mb-0 py-0">
      <a href="/">
      Fundamentos de programación con R
      </a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/Cidree/MG_fundamentosR"  title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Alternar modo oscuro"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Alternar modo lector">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Buscar"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Bienvenida</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="/1001_visualization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Visualización</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/1002_introduction.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class='chapter-number'>1</span>  <span class='chapter-title'>Introducción a la visualización de datos</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/1003_first_steps.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class='chapter-number'>2</span>  <span class='chapter-title'>Primeros pasos con ggplot2</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/1004_components.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class='chapter-number'>3</span>  <span class='chapter-title'>Componentes</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="/1101_visualization_types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tipos de visualización</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/1102_distribution.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class='chapter-number'>4</span>  <span class='chapter-title'>Gráficos de distribución</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/1103_relationship.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class='chapter-number'>5</span>  <span class='chapter-title'>Gráficos de relación</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/1104_comparison.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class='chapter-number'>6</span>  <span class='chapter-title'>Gráficos de comparación</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="/1201_components.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Componentes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/1202_scales.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class='chapter-number'>7</span>  <span class='chapter-title'>Scales</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/1203_facets.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class='chapter-number'>8</span>  <span class='chapter-title'>Facetas</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4"  role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Alternar sección">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="/chapters/installation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class='chapter-number'>A</span>  <span class='chapter-title'>Instalación</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" ></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <div id="quarto-toc-target"></div>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span id="sec-scales" class="quarto-section-identifier"><span class="chapter-number">7</span>  <span class="chapter-title">Scales</span></span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>

<nav id="TOC" role="doc-toc">
    <h2 id="toc-title">Tabla de contenidos</h2>
   
  <ul>
  <li><a href="#estructura-de-las-escalas" id="toc-estructura-de-las-escalas"><span class="header-section-number">7.1</span> Estructura de las escalas</a></li>
  <li><a href="#escalas-de-posición" id="toc-escalas-de-posición"><span class="header-section-number">7.2</span> Escalas de posición</a>
  <ul>
  <li><a href="#escalas-de-posición-continuas" id="toc-escalas-de-posición-continuas"><span class="header-section-number">7.2.1</span> Escalas de posición continuas</a></li>
  <li><a href="#escalas-de-posición-discretas" id="toc-escalas-de-posición-discretas"><span class="header-section-number">7.2.2</span> Escalas de posición discretas</a></li>
  </ul></li>
  <li><a href="#escalas-de-colores" id="toc-escalas-de-colores"><span class="header-section-number">7.3</span> Escalas de colores</a>
  <ul>
  <li><a href="#variables-continuas" id="toc-variables-continuas"><span class="header-section-number">7.3.1</span> Variables continuas</a></li>
  <li><a href="#leyendas" id="toc-leyendas"><span class="header-section-number">7.3.2</span> Leyendas</a></li>
  <li><a href="#variables-discretas" id="toc-variables-discretas"><span class="header-section-number">7.3.3</span> Variables discretas</a></li>
  </ul></li>
  <li><a href="#otras-escalas" id="toc-otras-escalas"><span class="header-section-number">7.4</span> Otras escalas</a>
  <ul>
  <li><a href="#escalas-de-tamaño" id="toc-escalas-de-tamaño"><span class="header-section-number">7.4.1</span> Escalas de tamaño</a></li>
  <li><a href="#escalas-de-forma" id="toc-escalas-de-forma"><span class="header-section-number">7.4.2</span> Escalas de forma</a></li>
  </ul></li>
  <li><a href="#resumen" id="toc-resumen"><span class="header-section-number">7.5</span> Resumen</a></li>
  <li><a href="#referencias" id="toc-referencias">Referencias</a></li>
  </ul>
</nav>
<p>Las escalas son una parte fundamental de la visualización de datos. Son las encargadas de mapear los valores de los datos a los elementos visuales de la gráfica. Podemos dividirlas en las siguientes clases:</p>
<ul>
<li><p><strong>Escalas continuas</strong>: se utilizan para modificar la apariencia de los elementos visuales en función de valores numéricos.</p></li>
<li><p><strong>Escalas discretas</strong>: se utilizan para modificar la apariencia de los elementos visuales en función de valores categóricos.</p></li>
<li><p><strong>Escalas en intervalos</strong>: se utilizan para modificar la apariencia de los elementos visuales en función de valores numéricos que se encuentran en un intervalo.</p></li>
</ul>
<p>Además, se puede subdividir las escalas en función de la estética que modifican:</p>
<ul>
<li><p><strong>Escalas de posición y ejes</strong>: controlar la posición de los elementos visuales además de sus ejes. En esta categoría tenemos la estética <code>x</code> e <code>y</code>.</p></li>
<li><p><strong>Escalas de colores</strong>: controlan el color externo y color de relleno de los elementos visuales y sus leyendas. En esta categoría tenemos las estéticas <code>color</code> y <code>fill</code>.</p></li>
<li><p><strong>Otras escalas</strong>: controlar el aspecto de los elementos visuales y sus respectivas leyendas. En esta categoría tenemos las estéticas <code>alpha</code>, <code>linetype</code>, <code>linewidth</code>, <code>shape</code> y <code>size</code>.</p></li>
</ul>
<p>En este capítulo vamos a trabajar con tres <em>datasets</em>:</p>
<ul>
<li><p><code>iris</code>: <em>dataset</em> donde se han medido la longitud y anchura de pétalos y sépalos de 150 flores, además de la especie a la que pertenecen (ver <a href="#sec-visualization-types" target="_blank">Tipos de visualización</a>).</p></li>
<li><p><code>gapminder</code>: <em>dataset</em> con la evolución temporal del desarrollo económico, población y esperanza de vida de los países del mundo (ver <a href="#sec-visualization-types" target="_blank">Tipos de visualización</a>). Filtraremos solamente los datos del 2002.</p></li>
<li><p><code>inventario</code>: <em>dataset</em> con datos de inventario de 27 parcelas en los que se ha medido el DBH, altura y especie (ver <a href="#sec-vis-data" class="quarto-xref"><span class="quarto-unresolved-ref">sec-vis-data</span></a>).</p></li>
</ul>
<p>Para comenzar, vamos a cargar los paquetes necesarios y a leer los datos que utilizaremos en este capítulo.</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb1"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(geomtextpath)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
</details>
</div>
<section id="estructura-de-las-escalas" class="level2" data-number="7.1">
<h2 data-number="7.1"><span class="header-section-number">7.1</span> Estructura de las escalas</h2>
<p>Las escalas en <code>ggplot2</code> son funciones que tienen una estructura de generalmente tres palabras separadas por un guión bajo. Estas palabras son:</p>
<ul>
<li><p><strong>scale</strong>: es la primera palabra de la función siempre.</p></li>
<li><p><strong>Nombre de la estética</strong>: es la segunda palabra de la función y se refiere a la estética que se quiere modificar (<code>x</code>, <code>y</code>, <code>color</code>, <code>fill</code>, <code>alpha</code>, <code>linetype</code>, <code>linewidth</code>, <code>shape</code> o <code>size</code>).</p></li>
<li><p><strong>Tipo de escala</strong>: es la tercera palabra de la función y se refiere al tipo de escala que se quiere aplicar (<code>continuous</code>, <code>discrete</code>, <code>manual</code>, <code>identity</code>, <code>log</code>, …).</p></li>
</ul>
<p>En las siguientes sección veremos algunas de las más importantes.</p>
</section>
<section id="escalas-de-posición" class="level2" data-number="7.2">
<h2 data-number="7.2"><span class="header-section-number">7.2</span> Escalas de posición</h2>
<p>Las escalas de posición se utilizan para mapear los valores de los datos a las posiciones de los elementos visuales de la gráfica. Todos los gráficos tienen dos escalas de posición que son la estética <code>x</code> y la estética <code>y</code>. Todos los gráficos traen una escala por defecto que depende de si la variable es categórica o numérica:</p>
<ul>
<li><p><code>scale_x_continuous()</code> y : escala de posición para variables numéricas en el eje x.</p></li>
<li><p><code>scale_y_continuous()</code>: escala de posición para variables numéricas en el eje y.</p></li>
<li><p><code>scale_x_discrete()</code>: escala de posición para variables categóricas en el eje x.</p></li>
<li><p><code>scale_y_discrete()</code>: escala de posición para variables categóricas en el eje y.</p></li>
</ul>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class='callout-icon'></i>
</div>
<div class="callout-title-container flex-fill">
Nota
</div>
</div>
<div class="callout-body-container callout-body">
<p>Existe alguna excepción como el formato fecha que utiliza <code>scale_*_date()</code> o el formato fecha-tiempo que utiliza <code>scale_*_datetime()</code>.</p>
</div>
</div>
<p>Vamos a empezar con un ejemplo sencillo utilizando el <em>dataset</em> <code>iris</code>.</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">Sin escalas</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Con escalas</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>En este primer ejemplo, generamos un gráfico de la distribución de la anchura del sépalo según la especie. Tenemos que añadir una semilla para que el proceso aleatorio de <code>geom_jitter()</code> sea el mismo en ambos ejemplos.</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb2"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Species, <span class="at">y =</span> Sepal.Width)) <span class="sc">+</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">height =</span> <span class="dv">0</span>, <span class="at">width =</span> .<span class="dv">2</span>)</span></code></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-jitter-no-scales" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-jitter-no-scales-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="1202_scales_files/figure-html/fig-jitter-no-scales-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="Fig. 7.1: Distribución de la anchura del pétalo por especie de Iris"><img src="1202_scales_files/figure-html/fig-jitter-no-scales-1.png" class="img-fluid" width="672" /></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-jitter-no-scales-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Fig. 7.1: Distribución de la anchura del pétalo por especie de Iris
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>Si añadimos las escalas que supuestamente son las que vienen por defecto, no debería cambiar nada en nuestro gráfico:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb3"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Species, <span class="at">y =</span> Sepal.Width)) <span class="sc">+</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">height =</span> <span class="dv">0</span>, <span class="at">width =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>() <span class="sc">+</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-jitter-scales" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-jitter-scales-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="1202_scales_files/figure-html/fig-jitter-scales-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Fig. 7.2: Distribución de la anchura del pétalo por especie de Iris"><img src="1202_scales_files/figure-html/fig-jitter-scales-1.png" class="img-fluid" width="672" /></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-jitter-scales-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Fig. 7.2: Distribución de la anchura del pétalo por especie de Iris
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Pues bien, hasta aquí nada nuevo. Vamos a empezar a ver finalmente qué podemos hacer con las escalas de posición.</p>
<section id="escalas-de-posición-continuas" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1"><span class="header-section-number">7.2.1</span> Escalas de posición continuas</h3>
<p>Para trabajar sobre escalas de posición continuas vamos a partir de este ejemplo que ya hemos trabajado en secciones anteriores del dataset de <code>gapminder</code>. Vamos a empezar preparando los datos:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb4"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>gapminder_tbl <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(continent <span class="sc">!=</span> <span class="st">&quot;Africa&quot;</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">as_date</span>(</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">paste0</span>(year, <span class="st">&quot;-01-01&quot;</span>)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    ))</span></code></pre></div>
</details>
</div>
<p>Como veis, estamos convirtiendo la columna <code>year</code> a tipo de dato <code>Date</code> en lugar de <code>numeric</code>. En un rato veréis por qué.</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb5"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="ot">&lt;-</span> gapminder_tbl <span class="sc">|&gt;</span> </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> gdpPercap, <span class="at">color =</span> country, <span class="at">group =</span> country)</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">&quot;grey80&quot;</span>) <span class="sc">+</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_textpath</span>(</span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> gdpPercap, <span class="at">label =</span> country),</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">data  =</span> gapminder_tbl <span class="sc">|&gt;</span> <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">&quot;Kuwait&quot;</span>, <span class="st">&quot;Nicaragua&quot;</span>, <span class="st">&quot;Haiti&quot;</span>)),</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="st">&quot;#BC3908&quot;</span>,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>        <span class="at">lwd   =</span> <span class="dv">1</span>,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>        <span class="at">size  =</span> <span class="dv">3</span></span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">x     =</span> <span class="cn">NULL</span>,</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">y     =</span> <span class="st">&quot;PIB per cápita&quot;</span>,</span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="cn">NULL</span>,</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">title =</span> <span class="st">&quot;La mayoría de países aumentaron su PIB per cápita entre 1952 y 2007. </span><span class="sc">\n</span><span class="st">Kuwait, Nicaragua y Haiti no&quot;</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>base_plot</span></code></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-spaguetti-scales" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-spaguetti-scales-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="1202_scales_files/figure-html/fig-spaguetti-scales-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Fig. 7.3: Spaguetti plot mostrando la evolución del PIB per cápita de los países del mundo"><img src="1202_scales_files/figure-html/fig-spaguetti-scales-1.png" class="img-fluid" width="672" /></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-spaguetti-scales-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Fig. 7.3: Spaguetti plot mostrando la evolución del PIB per cápita de los países del mundo
</figcaption>
</figure>
</div>
</div>
</div>
<p>Vamos a ver qué podemos modificar:</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Intervalos</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Número de intervalos</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Intervalos menores</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-4" role="tab" aria-controls="tabset-2-4" aria-selected="false">Etiquetas ejes</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-5" role="tab" aria-controls="tabset-2-5" aria-selected="false">Límites ejes</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>Podemos indicar un vector de valores para especificar los valores que queremos ver en los ejes. Además, con name también podemos modificar el nombre de este eje (al igual que en la función <code>labs()</code>).</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb6"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name   =</span> <span class="st">&quot;PIB per cápita ($)&quot;</span>,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100000</span>, <span class="dv">20000</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="1202_scales_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>Fíjate que al superar los 5 dígitos la notación es decimal. Podemos cambiar este comportamiento del siguiente modo:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb7"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="dv">999</span>)</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">name   =</span> <span class="st">&quot;PIB per cápita ($)&quot;</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100000</span>, <span class="dv">20000</span>)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-8-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5"><img src="1202_scales_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>En lugar de indicar los intervalos que queremos, podemos indicar un número de intervalos para que la función los calcule óptimamente. Vamos a indicar un total de 10 intervalos:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb8"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name     =</span> <span class="st">&quot;PIB per cápita ($)&quot;</span>,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">n.breaks =</span> <span class="dv">10</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-9-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="1202_scales_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<p>Si te fijas, en la grilla del gráfico tenemos unas líneas más gruesas en las etiquetas y otras más finas entre las etiquetas. Estás líneas más finas son los intervalos menores. Para ver lo que significa esto, vamos a crear un <code>minor break</code> cada $2000.</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb9"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name         =</span> <span class="st">&quot;PIB per cápita ($)&quot;</span>,</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">n.breaks     =</span> <span class="dv">10</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">minor_breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">110000</span>, <span class="dv">2000</span>)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-10-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7"><img src="1202_scales_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-2-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-4-tab">
<p>Las etiquetas son los valores que muestran los intervalos que creamos con <code>breaks</code> o <code>n_breaks</code>. Podemos poner lo que queramos. Por ver un ejemplo obvio de lo que se puede hacer:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb10"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name   =</span> <span class="st">&quot;PIB per cápita ($)&quot;</span>,</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100000</span>, <span class="dv">20000</span>),</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;Cero&quot;</span>, <span class="st">&quot;Primera&quot;</span>, <span class="st">&quot;Segunda&quot;</span>, <span class="st">&quot;Tercera&quot;</span>, <span class="st">&quot;Cuarta&quot;</span>, <span class="st">&quot;Quinta&quot;</span>)</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-11-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-8"><img src="1202_scales_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>Ahora vamos a ver un ejemplo mucho más útil utilizando el paquete <code>scales</code>. Este paquete nos permite añadir símbolos, separar unidades, etc. En lugar de tener valores como 100000, vamos a modificarlos para que muestren $100,000. Para ello utilizamos la función <code>label_dollar()</code> que por defecto modifica el comportamiento al que nosotros queremos.</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb11"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100000</span>, <span class="dv">20000</span>),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>()</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-12-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9"><img src="1202_scales_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>Como en España es común separar decimales por comas y los miles por puntos, podemos modificar este comportamiento así:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb12"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100000</span>, <span class="dv">20000</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>(</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">big.mark     =</span> <span class="st">&quot;.&quot;</span>,</span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">decimal.mark =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-13-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10"><img src="1202_scales_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>Puede parecer una sintaxis extraña. Este tipo de funciones se llaman <em>function factories</em> y es un tema avanzado y que queda fuera de los objetivos de este curso. En <a href="https://adv-r.hadley.nz/function-factories.html">este enlace</a> se puede ver una lectura adicional sobre este tipo de funciones.</p>
</div>
<div id="tabset-2-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-5-tab">
<p>Finalmente, vamos a ver que podemos hacer zoom a un área del gráfico. Vamos a ver el área de $0 hasta $20,000.</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb13"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_continuous</span>(</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name   =</span> <span class="st">&quot;PIB per cápita ($)&quot;</span>,</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20000</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-14-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-11"><img src="1202_scales_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Este sería el funcionamiento básico de las funciones <code>scale_*_continuous()</code>. No obstante, podemos modificar la función utilizando una aceptable por variables continuas:</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Transformaciones</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Fechas</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>Las escalas normales van a mapear los valores originales de nuestros datos. Sin embargo, podemos aplicar transformaciones directas a las escalas como por ejemplo la transformación logarítmica:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb14"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_log10</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-15-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-12"><img src="1202_scales_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>Del mismo modo, podemos aplicar los mismos argumentos:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb15"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_log10</span>(</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name   =</span> <span class="st">&quot;PIB (escala logarítmica)&quot;</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100000</span>, <span class="dv">20000</span>),</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>(</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">big.mark     =</span> <span class="st">&quot;.&quot;</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">decimal.mark =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-16-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-13"><img src="1202_scales_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>Como utilizamos logaritmos nos aparecen los decimales que son siempre dos ceros. Podemos eliminarlos:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb16"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_y_log10</span>(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name   =</span> <span class="st">&quot;PIB (escala logarítmica)&quot;</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">100000</span>, <span class="dv">20000</span>),</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_dollar</span>(</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">big.mark     =</span> <span class="st">&quot;.&quot;</span>,</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">decimal.mark =</span> <span class="st">&quot;,&quot;</span>,</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">accuracy     =</span> <span class="dv">1</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-17-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-14"><img src="1202_scales_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p>Para variables de tipo fecha tenemos una serie de funciones que nos ayudan a mostrar las etiquetas. Sin embargo, tenemos que convertir el tipo de dato a fecha, algo que hemos hecho previamente cuando creamos <code>gapminder_tbl</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb17"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_date</span>()</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-18-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-15"><img src="1202_scales_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>En verdad, cuando la variable es de tipo fecha se aplica esta escala por defecto. Vamos a modificar sus etiquetas para ver los años de cinco en cinco. Podemos utilizar el argumento <code>date_breaks</code> que permite una sintaxis muy flexible y amigable:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb18"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_date</span>(</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">date_breaks =</span> <span class="st">&quot;5 years&quot;</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-19-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-16"><img src="1202_scales_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>Vaya infortunio. Esta función nos añade los meses y los años… Pero no os preocupéis!! Paquete <code>scales</code> al rescate:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb19"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_date</span>(</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">date_breaks =</span> <span class="st">&quot;5 years&quot;</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels      =</span> scales<span class="sc">::</span><span class="fu">label_date</span>(<span class="at">format =</span> <span class="st">&quot;%Y&quot;</span>)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-20-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-17"><img src="1202_scales_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>El argumento <code>format</code> nos permite escribir el formato de fecha siguiendo unos estándares. Busca la ayuda de la función <code>strptime()</code> para ver las opciones disponibles. Las más comunes puedes verlas <a href="https://ggplot2-book.org/scales-position#sec-date-labels">aquí</a>. Existe una opción que no necesita del paquete <code>scales</code>:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb20"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>base_plot <span class="sc">+</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_date</span>(</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">date_breaks =</span> <span class="st">&quot;5 years&quot;</span>,</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">date_labels =</span> <span class="st">&quot;%Y&quot;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-21-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-18"><img src="1202_scales_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Pues esto sería todo por esta parte de la sección. Como ves, es muy sencillo trabajar con las escalas gracias a la gramática de gráficos adaptada a <code>{ggplot2}</code>.</p>
</section>
<section id="escalas-de-posición-discretas" class="level3" data-number="7.2.2">
<h3 data-number="7.2.2"><span class="header-section-number">7.2.2</span> Escalas de posición discretas</h3>
<p>Vamos a ver ahora las escalas que mapean una variable de tipo categórico. La verdad es que aquí no vamos a introducir nada nuevo. La única diferencia con las anteriores es que utilizamos una función distinta y los argumentos que tenemos disponibles. En este caso no tiene sentido crear intervalos en la escala, ya que una variable categórica tiene los valores fijos. Lo que podemos es modificar las etiquetas y también la posición de la escala (esto lo podemos hacer también con las funciones anteriores, pero quería añadir algo nuevo en esta sección).</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb21"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(iris, <span class="fu">aes</span>(<span class="at">x =</span> Species, <span class="at">y =</span> Sepal.Width)) <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_jitter</span>(<span class="at">height =</span> <span class="dv">0</span>, <span class="at">width =</span> .<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_discrete</span>(</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">name     =</span> <span class="cn">NULL</span>,</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels   =</span> <span class="fu">c</span>(<span class="st">&quot;I. setosa&quot;</span>, <span class="st">&quot;I. versicolor&quot;</span>, <span class="st">&quot;I. virginica&quot;</span>),</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">position =</span> <span class="st">&quot;top&quot;</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-22-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-19"><img src="1202_scales_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>Finalmente, puedes ver que todas las funciones tienen un argumento denominado <code>guide</code>. Esto lo veremos más adelante.</p>
</section>
</section>
<section id="escalas-de-colores" class="level2" data-number="7.3">
<h2 data-number="7.3"><span class="header-section-number">7.3</span> Escalas de colores</h2>
<p>Las escalas de colores modifican el color de las líneas (<code>color</code>) y el color de relleno (<code>fill</code>). Las escalas de posición actúan sobre los ejes <code>x</code> e <code>y</code>, mientras que las que veremos en esta sección actúan sobre los colores de las geometrías generando una leyenda. Por defecto, se aplican las siguientes:</p>
<ul>
<li><p><code>scale_color_continuous()</code> / <code>scale_fill_continuous()</code>: para variables continuas.</p></li>
<li><p><code>scale_color_discrete()</code> / <code>scale_fill_discrete()</code>: para variables categóricas.</p></li>
</ul>
<section id="variables-continuas" class="level3" data-number="7.3.1">
<h3 data-number="7.3.1"><span class="header-section-number">7.3.1</span> Variables continuas</h3>
<p>Vamos a empezar viendo como actúan las escalas por defecto en variables continuas:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb22"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(</span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">color =</span> pop)</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;PIB per cápita&quot;</span>,</span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Esperanza de vida&quot;</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>scatter_base</span></code></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-gapminder-scales-scatter" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-gapminder-scales-scatter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="1202_scales_files/figure-html/fig-gapminder-scales-scatter-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-20" title="Fig. 7.4: Scatter plot del PIB per cápita, esperanza de vida y población de los países del mundo"><img src="1202_scales_files/figure-html/fig-gapminder-scales-scatter-1.png" class="img-fluid" width="672" /></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gapminder-scales-scatter-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Fig. 7.4: Scatter plot del PIB per cápita, esperanza de vida y población de los países del mundo
</figcaption>
</figure>
</div>
</div>
</div>
<p>La función <code>scale_color_continuous()</code> nos permite modificar la escala de colores con unos argumentos similares a los que vimos en las escalas de posición. Vamos a ver un ejemplo:</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Intervalos</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Etiquetas ejes</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">Tipo de paleta</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>Los intervalos los definimos de nuevo con <code>breaks</code> o <code>n.breaks</code>.</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb23"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="sc">+</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_continuous</span>(</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name   =</span> <span class="st">&quot;Población&quot;</span>,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">1e9</span>, <span class="fl">2e8</span>)</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-24-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-21"><img src="1202_scales_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb24"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_continuous</span>(</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name     =</span> <span class="st">&quot;Población&quot;</span>,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">n.breaks =</span> <span class="dv">3</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-25-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-22"><img src="1202_scales_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<p>Las etiquetas las definimos con <code>labels</code>. Vamos a ver un ejemplo con el paquete <code>scales</code>:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb25"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="sc">+</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_continuous</span>(</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name   =</span> <span class="st">&quot;Población&quot;</span>,</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> scales<span class="sc">::</span><span class="fu">label_number</span>(</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">big.mark     =</span> <span class="st">&quot;.&quot;</span>,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">decimal.mark =</span> <span class="st">&quot;,&quot;</span></span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-26-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-23"><img src="1202_scales_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<p>Podemos modificar el tipo de paleta de colores con el argumento <code>type</code>. Este es un argumento que las escalas de posición no tienen.</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb26"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="sc">+</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_continuous</span>(</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">&quot;Población&quot;</span>,</span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">&quot;viridis&quot;</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-27-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-24"><img src="1202_scales_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>En la última pestaña hemos visto como utilizar una paleta de colores mediante el argumento <code>type</code>. Sin embargo, algunas paletas comunes traen sus propias funciones del tipo <code>scale_color_*()</code> con una mayor flexibilidad.</p>
<section id="paletas-predefinidas" class="level4" data-number="7.3.1.1">
<h4 data-number="7.3.1.1"><span class="header-section-number">7.3.1.1</span> Paletas predefinidas</h4>
<p>Las escalas <code>viridis</code> <span class="citation" data-cites="garnier2018viridis">(<a href="#ref-garnier2018viridis" role="doc-biblioref">Garnier 2018</a>)</span> son una familia de paletas de colores que seguramente has visto en muchos gráficos. Estas son unas paletas con un gran diseño y que además son amigables con problemas de visión como el daltonismo. En la siguiente aplicación puedes ver las escalas <code>viridis</code> modificando el argumento <code>option</code> de la función <code>scale_color_viridis_c()</code>.</p>
<pre class="shinylive-r" data-engine="r"><code>#| standalone: true
#| viewerHeight: 600

## Load packages
library(bslib)
library(dplyr)
library(gapminder)
library(ggplot2)
library(glue)
library(shiny)
library(shinyWidgets)

## UI
ui &lt;- page_sidebar(
    sidebar = sidebar(
        open = &quot;open&quot;,
        width = 200,
        selectInput(
            inputId = &quot;option&quot;, 
            label   = &quot;Paleta&quot;, 
            choices = c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;),
            selected = &quot;D&quot;
        ),
        prettySwitch(
            inputId  = &quot;direction&quot;,
            label    = &quot;Invertir paleta&quot;,
            status   = &quot;success&quot;,
            fill     = TRUE
        ),
        prettySwitch(
            inputId = &quot;binned&quot;,
            label   = &quot;Binned&quot;,
            status  = &quot;success&quot;,
            fill    = TRUE
        )
    ),
    verbatimTextOutput(&quot;code&quot;) |&gt; card(),
    plotOutput(&quot;plot&quot;, width = 500) |&gt; card()
)

## Server
server &lt;- function(input, output, session) {
    
    output$code &lt;- renderPrint({
        glue(
            
            if (input$binned) {
                &#39;scatter_base +
                    scale_color_viridis_b(
                        option    = &quot;{input$option}&quot;,
                        direction = {if (input$direction) -1 else 1}
                    )&#39;
            } else {
                &#39;scatter_base +
                    scale_color_viridis_c(
                        option    = &quot;{input$option}&quot;,
                        direction = {if (input$direction) -1 else 1}
                    )&#39;
            }
            
            )
    })

    ## Plot
    output$plot &lt;- renderPlot({
        
        if (input$binned) {
            gapminder |&gt; 
            filter(year == 2007) |&gt; 
            ggplot(
                aes(x = gdpPercap, y = lifeExp, color = pop)
            ) +
            geom_point() +
            labs(
                x = &quot;PIB per cápita&quot;,
                y = &quot;Esperanza de vida&quot;
            ) +
            theme_minimal(base_size = 8) +
            scale_color_viridis_b(
                option    = input$option,
                direction = if (input$direction) -1 else 1
            )
        } else {
            gapminder |&gt; 
            filter(year == 2007) |&gt; 
            ggplot(
                aes(x = gdpPercap, y = lifeExp, color = pop)
            ) +
            geom_point() +
            labs(
                x = &quot;PIB per cápita&quot;,
                y = &quot;Esperanza de vida&quot;
            ) +
            theme_minimal(base_size = 8) +
            scale_color_viridis_c(
                option    = input$option,
                direction = if (input$direction) -1 else 1
            )
        }
        
        }, res = 96
    )
}

## Run app
shinyApp(ui = ui, server = server)</code></pre>
<p>Estas funciones pueden terminar en:</p>
<ul>
<li><p><code>scale_color_viridis_c()</code>: para variables continuas.</p></li>
<li><p><code>scale_color_viridis_d()</code>: para variables discretas.</p></li>
<li><p><code>scale_color_viridis_b()</code>: para variables continuas que se quieren dividir en intervalos.</p></li>
</ul>
<p>Por otro lado, tenemos la familia de paletas de colores <code>ColorBrewer</code> <span class="citation" data-cites="RColorBrewer">(<a href="#ref-RColorBrewer" role="doc-biblioref">Neuwirth 2022</a>)</span>, que podemos ver en la siguiente figura:</p>
<div class="cell">
<div class="cell-output-display">
<div id="fig-brewer-pals" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-brewer-pals-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="1202_scales_files/figure-html/fig-brewer-pals-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-25" title="Fig. 7.5: Paletas de colores Brewer"><img src="1202_scales_files/figure-html/fig-brewer-pals-1.png" class="img-fluid" width="672" /></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-brewer-pals-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Fig. 7.5: Paletas de colores Brewer
</figcaption>
</figure>
</div>
</div>
</div>
<p>Para acceder a ellas, podemos utilizar las funciones:</p>
<ul>
<li><p><code>scale_color_distiller()</code>: para variables continuas</p></li>
<li><p><code>scale_color_brewer()</code>: para variables discretas</p></li>
<li><p><code>scale_color_fermenter()</code>: para variables continuas que se quieren dividir en intervalos</p></li>
</ul>
<p>A medida que utilices <code>ggplot2</code> irás descubriendo paquetes que traen sus propias escalas de colores. Algunos ejemplos son <code>{ggsci}</code> <span class="citation" data-cites="ggsci">(<a href="#ref-ggsci" role="doc-biblioref">Xiao 2024</a>)</span>, <code>{MetBrewer}</code> <span class="citation" data-cites="MetBrewer">(<a href="#ref-MetBrewer" role="doc-biblioref">Mills 2022</a>)</span>, o <code>{scico}</code> <span class="citation" data-cites="scico">(<a href="#ref-scico" role="doc-biblioref">Pedersen y Crameri 2023</a>)</span>.</p>
<p>En la siguiente aplicación puedes probar distintas paletas <code>ColorBrewer</code>:</p>
<pre class="shinylive-r" data-engine="r"><code>#| standalone: true
#| viewerHeight: 600

## Load packages
library(bslib)
library(dplyr)
library(gapminder)
library(ggplot2)
library(glue)
library(RColorBrewer)
library(shiny)
library(shinyWidgets)

## UI
ui &lt;- page_sidebar(
    sidebar = sidebar(
        open = &quot;open&quot;,
        width = 200,
        selectInput(
            inputId  = &quot;option&quot;, 
            label    = &quot;Paleta&quot;, 
            choices  = rownames(brewer.pal.info),
            selected = &quot;Reds&quot;
        ),
        prettySwitch(
            inputId  = &quot;direction&quot;,
            label    = &quot;Invertir paleta&quot;,
            status   = &quot;success&quot;,
            fill     = TRUE
        ),
        prettySwitch(
            inputId = &quot;binned&quot;,
            label   = &quot;Binned&quot;,
            status  = &quot;success&quot;,
            fill    = TRUE
        )
    ),
    verbatimTextOutput(&quot;code&quot;) |&gt; card(),
    plotOutput(&quot;plot&quot;, width = 500) |&gt; card()
)

## Server
server &lt;- function(input, output, session) {
    
    output$code &lt;- renderPrint({
        glue(
            
            if (input$binned) {
                &#39;scatter_base +
                    scale_color_fermenter(
                        palette   = &quot;{input$option}&quot;,
                        direction = {if (input$direction) -1 else 1}
                    )&#39;
            } else {
                &#39;scatter_base +
                    scale_color_distiller(
                        palette   = &quot;{input$option}&quot;,
                        direction = {if (input$direction) -1 else 1}
                    )&#39;
            }
            
            )
    })

    ## Plot
    output$plot &lt;- renderPlot({
        
        if (input$binned) {
            gapminder |&gt; 
            filter(year == 2007) |&gt; 
            ggplot(
                aes(x = gdpPercap, y = lifeExp, color = pop)
            ) +
            geom_point() +
            labs(
                x = &quot;PIB per cápita&quot;,
                y = &quot;Esperanza de vida&quot;
            ) +
            theme_minimal(base_size = 8) +
            scale_color_fermenter(
                palette   = input$option,
                direction = if (input$direction) -1 else 1
            )
        } else {
            gapminder |&gt; 
            filter(year == 2007) |&gt; 
            ggplot(
                aes(x = gdpPercap, y = lifeExp, color = pop)
            ) +
            geom_point() +
            labs(
                x = &quot;PIB per cápita&quot;,
                y = &quot;Esperanza de vida&quot;
            ) +
            theme_minimal(base_size = 8) +
            scale_color_distiller(
                palette   = input$option,
                direction = if (input$direction) -1 else 1
            )
        }
        
        }, res = 96
    )
}

## Run app
shinyApp(ui = ui, server = server)</code></pre>
</section>
<section id="paletas-manuales" class="level4" data-number="7.3.1.2">
<h4 data-number="7.3.1.2"><span class="header-section-number">7.3.1.2</span> Paletas manuales</h4>
<p>En algunos paquetes tenemos una infinidad de paletas de colores predefinidas, pero puede haber ocasiones en las que prefiramos definir nosotros mismos la paleta de colores. Para ello, tenemos tres funciones que nos permiten definir una paleta de colores continua de forma manual:</p>
<ul>
<li><p><code>scale_color_gradient()</code>: a partir de dos colores, generamos un gradiente (definimos color mínimo y color máximo).</p></li>
<li><p><code>scale_color_gradient2()</code>: a partir de tres colores (siendo el tercero el punto medio)</p></li>
<li><p><code>scale_color_gradientn()</code>: a partir de <em>n</em> colores</p></li>
</ul>
<p>Vamos a ver estos tres en acción:</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Gradient</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Gradient2</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">Gradientn</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<p>En este caso, debemos especificar dos colores, y el resto se interpola entre ellos:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb29"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="sc">+</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_gradient</span>(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">&quot;Población&quot;</span>,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">low  =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">high =</span> <span class="st">&quot;green&quot;</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-29-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-26"><img src="1202_scales_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<p>En este caso, especificaremos además el color del medio. Por defecto, este punto es el valor de 0, por lo que podemos modificarlo a nuestro parecer con <code>midpoint</code>:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb30"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="sc">+</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_gradient2</span>(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name =</span> <span class="st">&quot;Población&quot;</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">low  =</span> <span class="st">&quot;blue&quot;</span>,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">mid  =</span> <span class="st">&quot;red&quot;</span>,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>        <span class="at">high =</span> <span class="st">&quot;green&quot;</span>,</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">midpoint =</span> <span class="fl">7e8</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-30-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-27"><img src="1202_scales_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<p>Finalmente, esta es una de las opciones más flexibles ya que en muchas ocasiones utilizaremos paletas de colores de varios colores que vienen dentro de algún paquete, y que en lugar de traer funciones del tipo <code>scale_color_*</code>, traen vectores de códigos hexadecimales con los colores. Un ejemplo son las paletas que vienen dentro de la función <code>hcl.colors()</code>:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb31"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="sc">+</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_gradientn</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name   =</span> <span class="st">&quot;Población&quot;</span>,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">colors =</span> <span class="fu">hcl.colors</span>(<span class="dv">50</span>, <span class="at">palette =</span> <span class="st">&quot;Spectral&quot;</span>)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-31-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-28"><img src="1202_scales_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>Las paletas pueden explorarse <a href="https://colorspace.r-forge.r-project.org/articles/hcl_palettes.html">aquí</a>.</p>
</div>
</div>
</div>
</section>
</section>
<section id="leyendas" class="level3" data-number="7.3.2">
<h3 data-number="7.3.2"><span class="header-section-number">7.3.2</span> Leyendas</h3>
<p>La apariencia de las leyendas se controla mediante las guías (<em>guides</em>). En el caso de variables continuas tenemos <code>guide_colorbar()</code>. Para modificar esto, debemos añadir la función <code>guides()</code>, y dentro elegir una estética que igualaremos a <code>guide_colorbar()</code>, como en este ejemplo:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb32"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="sc">+</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="fu">guide_colorbar</span>()</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-32-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-29"><img src="1202_scales_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>Dentro de esta función tenemos un montón de argumentos que podemos modificar para cambiar la apariencia de la leyenda, como pueden ser:</p>
<ul>
<li><p><code>title</code>: de nuevo, el título de la leyenda.</p></li>
<li><p><code>title.position</code>: posición del título con respecto a la barra</p></li>
<li><p><code>title.hjust</code>: justificación del título</p></li>
<li><p><code>direction</code>: dirección de la barra</p></li>
<li><p><code>position</code>: posición de la leyenda con respecto al gráfico</p></li>
<li><p><code>barwidth</code> y <code>barheight</code>: anchura y altura de la barra</p></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb33"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="sc">+</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="fu">guide_colorbar</span>(</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">title          =</span> <span class="st">&quot;Población&quot;</span>,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">title.hjust    =</span> .<span class="dv">5</span>,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">direction      =</span> <span class="st">&quot;horizontal&quot;</span>,</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">position       =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">barwidth       =</span> <span class="fu">unit</span>(<span class="dv">10</span>, <span class="st">&quot;cm&quot;</span>),</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>            <span class="at">barheight      =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">&quot;mm&quot;</span>)</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-33-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-30"><img src="1202_scales_files/figure-html/unnamed-chunk-33-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="variables-discretas" class="level3" data-number="7.3.3">
<h3 data-number="7.3.3"><span class="header-section-number">7.3.3</span> Variables discretas</h3>
<p>Las escala que se aplica por defecto a las variables discretas es <code>scale_color_discrete()</code>. Vamos a partir del siguiente gráfico, donde la estética color utiliza la variable del continente:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb34"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>        <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">color =</span> continent)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">x =</span> <span class="st">&quot;PIB per cápita&quot;</span>,</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">y =</span> <span class="st">&quot;Esperanza de vida&quot;</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>()</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>scatter_base</span></code></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-gapminder-scales-scatter-discrete" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-gapminder-scales-scatter-discrete-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="1202_scales_files/figure-html/fig-gapminder-scales-scatter-discrete-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-31" title="Fig. 7.6: Scatter plot del PIB per cápita, esperanza de vida y continente"><img src="1202_scales_files/figure-html/fig-gapminder-scales-scatter-discrete-1.png" class="img-fluid" width="672" /></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gapminder-scales-scatter-discrete-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Fig. 7.6: Scatter plot del PIB per cápita, esperanza de vida y continente
</figcaption>
</figure>
</div>
</div>
</div>
<section id="paletas-manuales-1" class="level4" data-number="7.3.3.1">
<h4 data-number="7.3.3.1"><span class="header-section-number">7.3.3.1</span> Paletas manuales</h4>
<p>Vamos a ver a continuación las opciones más comunes para modificar en la función base:</p>
<ul>
<li><p><code>name</code>: título de la leyenda</p></li>
<li><p><code>labels</code>: etiquetas que se muestran en la leyenda</p></li>
<li><p><code>type</code>: vector de colores</p></li>
</ul>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb35"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="sc">+</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_discrete</span>(</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name   =</span> <span class="st">&quot;Continente&quot;</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;África&quot;</span>, <span class="st">&quot;América&quot;</span>, <span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;Europa&quot;</span>, <span class="st">&quot;Oceanía&quot;</span>),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">type   =</span> <span class="fu">hcl.colors</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">palette =</span> <span class="st">&quot;Dark 2&quot;</span>)</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-35-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-32"><img src="1202_scales_files/figure-html/unnamed-chunk-35-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>Eque <code>scale_color_discrete()</code>, pero con un nombre más intuitivo: <code>scale_color_manual()</code>. Como diferencia, utiliza el argumento <code>values</code> para definir los colores. Vamos a ver cómo se utiliza:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb36"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="sc">+</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_color_manual</span>(</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">name   =</span> <span class="st">&quot;Continente&quot;</span>,</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>        <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;África&quot;</span>, <span class="st">&quot;América&quot;</span>, <span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;Europa&quot;</span>, <span class="st">&quot;Oceanía&quot;</span>),</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>        <span class="at">values =</span> <span class="fu">hcl.colors</span>(<span class="at">n =</span> <span class="dv">5</span>, <span class="at">palette =</span> <span class="st">&quot;Dark 2&quot;</span>)</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-36-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-33"><img src="1202_scales_files/figure-html/unnamed-chunk-36-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</section>
<section id="paletas-predefinidas-1" class="level4" data-number="7.3.3.2">
<h4 data-number="7.3.3.2"><span class="header-section-number">7.3.3.2</span> Paletas predefinidas</h4>
<p>Para el caso de las variables categóricas, también tenemos la opción de utilizar <code>scale_color_brewer()</code> para una paleta de colores ColorBrewer <a href="#fig-brewer-pals" class="quarto-xref">Figura <span class="quarto-unresolved-ref">fig-brewer-pals</span></a>. Para variables categóricas, es más interesante utilizar el segundo grupo de paletas de la <a href="#fig-brewer-pals" class="quarto-xref">Figura <span class="quarto-unresolved-ref">fig-brewer-pals</span></a>, debido a que nos interesa tener colores distintos para cada clase, y no una paleta secuencial donde los colores son similares.</p>
<p>Si queremos utilizar una paleta de <code>viridis</code>, podemos utilizar la función <code>scale_color_viridis_d()</code>.</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">Color Brewer</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Viridis</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<pre class="shinylive-r" data-engine="r"><code>#| standalone: true
#| viewerHeight: 600

## Load packages
library(bslib)
library(dplyr)
library(gapminder)
library(ggplot2)
library(glue)
library(RColorBrewer)
library(shiny)
library(shinyWidgets)

## UI
ui &lt;- page_sidebar(
    sidebar = sidebar(
        open = &quot;open&quot;,
        width = 200,
        selectInput(
            inputId  = &quot;option&quot;, 
            label    = &quot;Paleta&quot;, 
            choices  = rownames(brewer.pal.info),
            selected = &quot;Reds&quot;
        ),
        prettySwitch(
            inputId  = &quot;direction&quot;,
            label    = &quot;Invertir paleta&quot;,
            status   = &quot;success&quot;,
            fill     = TRUE
        )
    ),
    verbatimTextOutput(&quot;code&quot;) |&gt; card(),
    plotOutput(&quot;plot&quot;, width = 500) |&gt; card()
)

## Server
server &lt;- function(input, output, session) {
    
    output$code &lt;- renderPrint({
        glue(
                &#39;scatter_base +
                    scale_color_brewer(
                        palette   = &quot;{input$option}&quot;,
                        direction = {if (input$direction) -1 else 1}
                    )&#39;
            
            
            )
    })

    ## Plot
    output$plot &lt;- renderPlot({
      
      gapminder |&gt; 
        filter(year == 2007) |&gt; 
        ggplot(
            aes(x = gdpPercap, y = lifeExp, color = continent)
        ) +
        geom_point() +
        labs(
            x = &quot;PIB per cápita&quot;,
            y = &quot;Esperanza de vida&quot;
        ) +
        theme_minimal(base_size = 8) +
        scale_color_brewer(
            palette   = input$option,
            direction = if (input$direction) -1 else 1
        )
        
        }, res = 96
    )
}

## Run app
shinyApp(ui = ui, server = server)</code></pre>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<pre class="shinylive-r" data-engine="r"><code>#| standalone: true
#| viewerHeight: 600

## Load packages
library(bslib)
library(dplyr)
library(gapminder)
library(ggplot2)
library(glue)
library(shiny)
library(shinyWidgets)

## UI
ui &lt;- page_sidebar(
    sidebar = sidebar(
        open = &quot;open&quot;,
        width = 200,
        selectInput(
            inputId = &quot;option&quot;, 
            label   = &quot;Paleta&quot;, 
            choices = c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;),
            selected = &quot;D&quot;
        ),
        prettySwitch(
            inputId  = &quot;direction&quot;,
            label    = &quot;Invertir paleta&quot;,
            status   = &quot;success&quot;,
            fill     = TRUE
        )
    ),
    verbatimTextOutput(&quot;code&quot;) |&gt; card(),
    plotOutput(&quot;plot&quot;, width = 500) |&gt; card()
)

## Server
server &lt;- function(input, output, session) {
    
    output$code &lt;- renderPrint({
        glue(
        
        &#39;scatter_base +
            scale_color_viridis_d(
            option    = &quot;{input$option}&quot;,
            direction = {if (input$direction) -1 else 1}
        )&#39;
            
            
            )
    })

    ## Plot
    output$plot &lt;- renderPlot({
      
      gapminder |&gt;
        filter(year == 2007) |&gt; 
        ggplot(
            aes(x = gdpPercap, y = lifeExp, color = continent)
        ) +
        geom_point() +
        labs(
            x = &quot;PIB per cápita&quot;,
            y = &quot;Esperanza de vida&quot;
        ) +
        theme_minimal(base_size = 8) +
        scale_color_viridis_d(
            option    = input$option,
            direction = if (input$direction) -1 else 1
        )
        
        }, res = 96
    )
}

## Run app
shinyApp(ui = ui, server = server)</code></pre>
</div>
</div>
</div>
<p>Y estas serían las escalas de colores más comunes.</p>
</section>
<section id="leyendas-1" class="level4" data-number="7.3.3.3">
<h4 data-number="7.3.3.3"><span class="header-section-number">7.3.3.3</span> Leyendas</h4>
<p>Para las variables discretas, la leyenda se controla mediante <code>guide_legend()</code>. Además de los argumentos que veíamos con <code>guide_colorbar()</code>, tenemos la opción de <code>nrow</code> para definir el número de filas de la leyenda o en su caso <code>ncol</code> para definir el número de columnas. Vamos a ver un ejemplo:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb39"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>scatter_base <span class="sc">+</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="fu">guide_legend</span>(</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">title          =</span> <span class="st">&quot;Continente&quot;</span>,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">title.position =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">title.hjust    =</span> .<span class="dv">5</span>,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">position       =</span> <span class="st">&quot;top&quot;</span>,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">nrow           =</span> <span class="dv">2</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-37-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-34"><img src="1202_scales_files/figure-html/unnamed-chunk-37-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="otras-escalas" class="level2" data-number="7.4">
<h2 data-number="7.4"><span class="header-section-number">7.4</span> Otras escalas</h2>
<p>Finalmente, existen escalas para otro tipo de estéticas. Estas funcionan de manera similar a las escalas de colores, ya que también generan una leyenda. En este libro, vamos a ver las escalas de tamaño y de forma.</p>
<section id="escalas-de-tamaño" class="level3" data-number="7.4.1">
<h3 data-number="7.4.1"><span class="header-section-number">7.4.1</span> Escalas de tamaño</h3>
<p>Las escalas de tamaño (<code>scale_size_*</code>) se utilizan para modificar el tamaño de los elementos de la gráfica, como el tamaño de los puntos. Esta se puede aplicar tanto a variables continuas como a variables discretas, y las funciones que tenemos disponibles son:</p>
<ul>
<li><p><code>scale_size_continuous()</code>: para variables continuas.</p></li>
<li><p><code>scale_size_discrete()</code>: para variables discretas.</p></li>
<li><p><code>scale_size()</code> y <code>scale_radius()</code>: neutrales para modificar el área o el radio. Son las que utilizaremos generalmente.</p></li>
<li><p>Otras: tenemos otras que sirven para fechas, intervalos, manual para variables discretas, etc.</p></li>
</ul>
<p>Vamos a empezar trabajando sobre este gráfico:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb40"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>bubble_base <span class="ot">&lt;-</span> gapminder <span class="sc">|&gt;</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> </span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">fill =</span> continent, <span class="at">size =</span> pop)</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(</span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="dv">21</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;PIB per cápita&quot;</span>,</span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;Esperanza de vida&quot;</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>bubble_base</span></code></pre></div>
</details>
<div class="cell-output-display">
<div id="fig-gapminder-scales-size" class="quarto-float quarto-figure quarto-figure-center">
<figure class="quarto-float quarto-float-fig">
<div aria-describedby="fig-gapminder-scales-size-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="1202_scales_files/figure-html/fig-gapminder-scales-size-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-35" title="Fig. 7.7: Scatter plot del PIB per cápita, esperanza de vida y población de los países del mundo"><img src="1202_scales_files/figure-html/fig-gapminder-scales-size-1.png" class="img-fluid" width="672" /></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gapminder-scales-size-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Fig. 7.7: Scatter plot del PIB per cápita, esperanza de vida y población de los países del mundo
</figcaption>
</figure>
</div>
</div>
</div>
<p>El argumento más importante de estas funciones es <code>range</code>, que nos permite modificar el rango de tamaños que se van a mostrar en la leyenda. En el siguiete caso, el punto más pequeño tiene tamaño de 1, mientras que el más grande tiene tamapo de 20:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb41"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>bubble_base <span class="sc">+</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_size</span>(</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name  =</span> <span class="st">&quot;Población&quot;</span>,</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">20</span>)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-39-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-36"><img src="1202_scales_files/figure-html/unnamed-chunk-39-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>También podemos modificar utilizando una medida del radio en lugar del área:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb42"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>bubble_base <span class="sc">+</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_radius</span>(</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">name  =</span> <span class="st">&quot;Población&quot;</span>,</span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">range =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">20</span>)</span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-40-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-37"><img src="1202_scales_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
<p>Como véis, el objetivo de las funciones es el mismo pero midiendo el tamaño de distinta manera.</p>
</section>
<section id="escalas-de-forma" class="level3" data-number="7.4.2">
<h3 data-number="7.4.2"><span class="header-section-number">7.4.2</span> Escalas de forma</h3>
<p>Las escalas de forma (<code>scale_shape_*</code>) se utilizan para modificar la forma de los elementos de la gráfica, como la forma de los puntos. Esta se puede aplicar tanto a variables continuas como a variables discretas, y las funciones que tenemos disponibles son:</p>
<ul>
<li><p><code>scale_shape_continuous()</code>: para variables continuas.</p></li>
<li><p><code>scale_shape_manual()</code>: para variables discretas.</p></li>
<li><p><code>scale_shape()</code>: neutral. Es la que utilizaremos generalmente.</p></li>
</ul>
<p>En el siguiente ejemplo se muestran los continentes con las formas que vienen por defecto. Son solid indicamos si las formas son sólidas, o si tienen un borde y relleno:</p>
<div class="cell">
<details class="code-fold">
<summary>Código</summary>
<div class="sourceCode" id="cb43"><pre class="sourceCode r cell-code"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span> </span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">2007</span>) <span class="sc">|&gt;</span> </span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>      <span class="fu">aes</span>(<span class="at">x =</span> gdpPercap, <span class="at">y =</span> lifeExp, <span class="at">shape =</span> continent)</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> <span class="st">&quot;PIB per cápita&quot;</span>,</span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="st">&quot;Esperanza de vida&quot;</span></span>
<span id="cb43-10"><a href="#cb43-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb43-11"><a href="#cb43-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb43-12"><a href="#cb43-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_shape</span>(</span>
<span id="cb43-13"><a href="#cb43-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">name   =</span> <span class="st">&quot;Continente&quot;</span>,</span>
<span id="cb43-14"><a href="#cb43-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;África&quot;</span>, <span class="st">&quot;América&quot;</span>, <span class="st">&quot;Asia&quot;</span>, <span class="st">&quot;Europa&quot;</span>, <span class="st">&quot;Oceanía&quot;</span>),</span>
<span id="cb43-15"><a href="#cb43-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">solid  =</span> <span class="cn">FALSE</span></span>
<span id="cb43-16"><a href="#cb43-16" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure>
<p><a href="1202_scales_files/figure-html/unnamed-chunk-41-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-38"><img src="1202_scales_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid" width="672" /></a></p>
</figure>
</div>
</div>
</div>
</section>
</section>
<section id="resumen" class="level2" data-number="7.5">
<h2 data-number="7.5"><span class="header-section-number">7.5</span> Resumen</h2>
<div class="cell">
<div class="cell-output-display">
<div id="sncjrvketn" style="padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>#sncjrvketn table {
  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

#sncjrvketn thead, #sncjrvketn tbody, #sncjrvketn tfoot, #sncjrvketn tr, #sncjrvketn td, #sncjrvketn th {
  border-style: none;
}

#sncjrvketn p {
  margin: 0;
  padding: 0;
}

#sncjrvketn .gt_table {
  display: table;
  border-collapse: collapse;
  line-height: normal;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #929292;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #929292;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

#sncjrvketn .gt_caption {
  padding-top: 4px;
  padding-bottom: 4px;
}

#sncjrvketn .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

#sncjrvketn .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 3px;
  padding-bottom: 5px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

#sncjrvketn .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#sncjrvketn .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #929292;
}

#sncjrvketn .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #929292;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #929292;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

#sncjrvketn .gt_col_heading {
  color: #FFFFFF;
  background-color: #016763;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

#sncjrvketn .gt_column_spanner_outer {
  color: #FFFFFF;
  background-color: #016763;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

#sncjrvketn .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

#sncjrvketn .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

#sncjrvketn .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #929292;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

#sncjrvketn .gt_spanner_row {
  border-bottom-style: hidden;
}

#sncjrvketn .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #929292;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #929292;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  text-align: left;
}

#sncjrvketn .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #929292;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #929292;
  vertical-align: middle;
}

#sncjrvketn .gt_from_md > :first-child {
  margin-top: 0;
}

#sncjrvketn .gt_from_md > :last-child {
  margin-bottom: 0;
}

#sncjrvketn .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: dashed;
  border-top-width: 1px;
  border-top-color: #929292;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #929292;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #929292;
  vertical-align: middle;
  overflow-x: hidden;
}

#sncjrvketn .gt_stub {
  color: #333333;
  background-color: #D5D5D5;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #FFFFFF;
  padding-left: 5px;
  padding-right: 5px;
}

#sncjrvketn .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

#sncjrvketn .gt_row_group_first td {
  border-top-width: 2px;
}

#sncjrvketn .gt_row_group_first th {
  border-top-width: 2px;
}

#sncjrvketn .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#sncjrvketn .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #929292;
}

#sncjrvketn .gt_first_summary_row.thick {
  border-top-width: 2px;
}

#sncjrvketn .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #929292;
}

#sncjrvketn .gt_grand_summary_row {
  color: #333333;
  background-color: #D5D5D5;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

#sncjrvketn .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #929292;
}

#sncjrvketn .gt_last_grand_summary_row_top {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: double;
  border-bottom-width: 6px;
  border-bottom-color: #929292;
}

#sncjrvketn .gt_striped {
  background-color: #F4F4F4;
}

#sncjrvketn .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #929292;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #929292;
}

#sncjrvketn .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#sncjrvketn .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#sncjrvketn .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

#sncjrvketn .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

#sncjrvketn .gt_left {
  text-align: left;
}

#sncjrvketn .gt_center {
  text-align: center;
}

#sncjrvketn .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

#sncjrvketn .gt_font_normal {
  font-weight: normal;
}

#sncjrvketn .gt_font_bold {
  font-weight: bold;
}

#sncjrvketn .gt_font_italic {
  font-style: italic;
}

#sncjrvketn .gt_super {
  font-size: 65%;
}

#sncjrvketn .gt_footnote_marks {
  font-size: 75%;
  vertical-align: 0.4em;
  position: initial;
}

#sncjrvketn .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

#sncjrvketn .gt_indent_1 {
  text-indent: 5px;
}

#sncjrvketn .gt_indent_2 {
  text-indent: 10px;
}

#sncjrvketn .gt_indent_3 {
  text-indent: 15px;
}

#sncjrvketn .gt_indent_4 {
  text-indent: 20px;
}

#sncjrvketn .gt_indent_5 {
  text-indent: 25px;
}
</style>

<table class="gt_table caption-top" data-quarto-postprocess="true" data-quarto-disable-processing="false" data-quarto-bootstrap="false">
<caption>Resumen de las escalas vistas en este capítulo</caption>
<thead>
<tr class="header gt_col_headings">
<th id="Escala" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Escala</th>
<th id="Estética" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Estética</th>
<th id="Tipo de escala" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Tipo de escala</th>
<th id="Variable" class="gt_col_heading gt_columns_bottom_border gt_left" data-quarto-table-cell-role="th" scope="col">Variable</th>
</tr>
</thead>
<tbody class="gt_table_body">
<tr class="odd">
<td class="gt_row gt_left" headers="Escala">scale_*_continuous()</td>
<td class="gt_row gt_left" headers="Estética">x, y</td>
<td class="gt_row gt_left" headers="Tipo de escala">Posición</td>
<td class="gt_row gt_left" headers="Variable">Continua</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Escala">scale_*_discrete()</td>
<td class="gt_row gt_left gt_striped" headers="Estética">x, y</td>
<td class="gt_row gt_left gt_striped" headers="Tipo de escala">Posición</td>
<td class="gt_row gt_left gt_striped" headers="Variable">Categórica</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Escala">scale_*_log10()</td>
<td class="gt_row gt_left" headers="Estética">x, y</td>
<td class="gt_row gt_left" headers="Tipo de escala">Posición</td>
<td class="gt_row gt_left" headers="Variable">Continua</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Escala">scale_*_sqrt()</td>
<td class="gt_row gt_left gt_striped" headers="Estética">x, y</td>
<td class="gt_row gt_left gt_striped" headers="Tipo de escala">Posición</td>
<td class="gt_row gt_left gt_striped" headers="Variable">Continua</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Escala">scale_*_date()</td>
<td class="gt_row gt_left" headers="Estética">x, y</td>
<td class="gt_row gt_left" headers="Tipo de escala">Posición</td>
<td class="gt_row gt_left" headers="Variable">Fecha</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Escala">scale_*_continuous()</td>
<td class="gt_row gt_left gt_striped" headers="Estética">color, fill</td>
<td class="gt_row gt_left gt_striped" headers="Tipo de escala">Color</td>
<td class="gt_row gt_left gt_striped" headers="Variable">Continua</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Escala">scale_*_discrete()</td>
<td class="gt_row gt_left" headers="Estética">color, fill</td>
<td class="gt_row gt_left" headers="Tipo de escala">Color</td>
<td class="gt_row gt_left" headers="Variable">Discreta</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Escala">scale_*_viridis_c()</td>
<td class="gt_row gt_left gt_striped" headers="Estética">color, fill</td>
<td class="gt_row gt_left gt_striped" headers="Tipo de escala">Color</td>
<td class="gt_row gt_left gt_striped" headers="Variable">Continua</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Escala">scale_*_viridis_d()</td>
<td class="gt_row gt_left" headers="Estética">color, fill</td>
<td class="gt_row gt_left" headers="Tipo de escala">Color</td>
<td class="gt_row gt_left" headers="Variable">Categórica</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Escala">scale_*_viridis_b()</td>
<td class="gt_row gt_left gt_striped" headers="Estética">color, fill</td>
<td class="gt_row gt_left gt_striped" headers="Tipo de escala">Color</td>
<td class="gt_row gt_left gt_striped" headers="Variable">Continua</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Escala">scale_*_distiller()</td>
<td class="gt_row gt_left" headers="Estética">color, fill</td>
<td class="gt_row gt_left" headers="Tipo de escala">Color</td>
<td class="gt_row gt_left" headers="Variable">Continua</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Escala">scale_*_brewer()</td>
<td class="gt_row gt_left gt_striped" headers="Estética">color, fill</td>
<td class="gt_row gt_left gt_striped" headers="Tipo de escala">Color</td>
<td class="gt_row gt_left gt_striped" headers="Variable">Categórica</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Escala">scale_*_fermenter()</td>
<td class="gt_row gt_left" headers="Estética">color, fill</td>
<td class="gt_row gt_left" headers="Tipo de escala">Color</td>
<td class="gt_row gt_left" headers="Variable">Continua</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Escala">scale_*_gradient()</td>
<td class="gt_row gt_left gt_striped" headers="Estética">color, fill</td>
<td class="gt_row gt_left gt_striped" headers="Tipo de escala">Color</td>
<td class="gt_row gt_left gt_striped" headers="Variable">Continua</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Escala">scale_*_gradient2()</td>
<td class="gt_row gt_left" headers="Estética">color, fill</td>
<td class="gt_row gt_left" headers="Tipo de escala">Color</td>
<td class="gt_row gt_left" headers="Variable">Continua</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Escala">scale_*_gradientn()</td>
<td class="gt_row gt_left gt_striped" headers="Estética">color, fill</td>
<td class="gt_row gt_left gt_striped" headers="Tipo de escala">Color</td>
<td class="gt_row gt_left gt_striped" headers="Variable">Continua</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Escala">scale_*_manual()</td>
<td class="gt_row gt_left" headers="Estética">color, fill</td>
<td class="gt_row gt_left" headers="Tipo de escala">Color</td>
<td class="gt_row gt_left" headers="Variable">Categórica</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Escala">scale_size()</td>
<td class="gt_row gt_left gt_striped" headers="Estética">size</td>
<td class="gt_row gt_left gt_striped" headers="Tipo de escala">Otras</td>
<td class="gt_row gt_left gt_striped" headers="Variable">Ambas</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Escala">scale_area()</td>
<td class="gt_row gt_left" headers="Estética">size</td>
<td class="gt_row gt_left" headers="Tipo de escala">Otras</td>
<td class="gt_row gt_left" headers="Variable">Ambas</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Escala">scale_shape()</td>
<td class="gt_row gt_left gt_striped" headers="Estética">shape</td>
<td class="gt_row gt_left gt_striped" headers="Tipo de escala">Otras</td>
<td class="gt_row gt_left gt_striped" headers="Variable">Ambas</td>
</tr>
<tr class="odd">
<td class="gt_row gt_left" headers="Escala">scale_linetype()</td>
<td class="gt_row gt_left" headers="Estética">linetype</td>
<td class="gt_row gt_left" headers="Tipo de escala">Otras</td>
<td class="gt_row gt_left" headers="Variable">Ambas</td>
</tr>
<tr class="even">
<td class="gt_row gt_left gt_striped" headers="Escala">scale_linewidth()</td>
<td class="gt_row gt_left gt_striped" headers="Estética">linewidth</td>
<td class="gt_row gt_left gt_striped" headers="Tipo de escala">Otras</td>
<td class="gt_row gt_left gt_striped" headers="Variable">Ambas</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell" data-tbl-cap="Resumen de las escalas vistas en este capítulo">
<div class="cell-output-display">
<div class="reactable html-widget html-fill-item" id="htmlwidget-7598595affc4f25ab85b" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-7598595affc4f25ab85b">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Escala":["scale_*_continuous()","scale_*_discrete()","scale_*_log10()","scale_*_sqrt()","scale_*_date()","scale_*_continuous()","scale_*_discrete()","scale_*_viridis_c()","scale_*_viridis_d()","scale_*_viridis_b()","scale_*_distiller()","scale_*_brewer()","scale_*_fermenter()","scale_*_gradient()","scale_*_gradient2()","scale_*_gradientn()","scale_*_manual()","scale_size()","scale_area()","scale_shape()","scale_linetype()","scale_linewidth()"],"Estética":["x, y","x, y","x, y","x, y","x, y","color, fill","color, fill","color, fill","color, fill","color, fill","color, fill","color, fill","color, fill","color, fill","color, fill","color, fill","color, fill","size","size","shape","linetype","linewidth"],"Tipo de escala":["Posición","Posición","Posición","Posición","Posición","Color","Color","Color","Color","Color","Color","Color","Color","Color","Color","Color","Color","Otras","Otras","Otras","Otras","Otras"],"Variable":["Continua","Categórica","Continua","Continua","Fecha","Continua","Discreta","Continua","Categórica","Continua","Continua","Categórica","Continua","Continua","Continua","Continua","Categórica","Ambas","Ambas","Ambas","Ambas","Ambas"]},"columns":[{"id":"Escala","name":"Escala","type":"character"},{"id":"Estética","name":"Estética","type":"character"},{"id":"Tipo de escala","name":"Tipo de escala","type":"character"},{"id":"Variable","name":"Variable","type":"character"}],"dataKey":"0103c559e0a165df225acd30c5715143"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="referencias" class="level2 unnumbered">
<h2 class="unnumbered">Referencias</h2>
<div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-garnier2018viridis" class="csl-entry" role="listitem">
Garnier, Simon. 2018. <span>«Viridis: Default Color Maps from ’Matplotlib’»</span>. <a href="https://CRAN.R-project.org/package=viridis">https://CRAN.R-project.org/package=viridis</a>.
</div>
<div id="ref-MetBrewer" class="csl-entry" role="listitem">
Mills, Blake Robert. 2022. <span>«MetBrewer: Color Palettes Inspired by Works at the Metropolitan Museum of Art»</span>. <a href="https://CRAN.R-project.org/package=MetBrewer">https://CRAN.R-project.org/package=MetBrewer</a>.
</div>
<div id="ref-RColorBrewer" class="csl-entry" role="listitem">
Neuwirth, Erich. 2022. <span>«RColorBrewer: ColorBrewer Palettes»</span>.
</div>
<div id="ref-scico" class="csl-entry" role="listitem">
Pedersen, Thomas Lin, y Fabio Crameri. 2023. <span>«scico: Colour Palettes Based on the Scientific Colour-Maps»</span>. <a href="https://github.com/thomasp85/scico">https://github.com/thomasp85/scico</a>.
</div>
<div id="ref-ggsci" class="csl-entry" role="listitem">
Xiao, Nan. 2024. <span>«ggsci: Scientific Journal and Sci-Fi Themed Color Palettes for ’ggplot2’»</span>. <a href="https://nanx.me/ggsci/">https://nanx.me/ggsci/</a>.
</div>
</div>
<div id="quarto-navigation-envelope" class="hidden">
<p><span class="hidden" data-render-id="quarto-int-sidebar-title">Fundamentos de programación con R</span> <span class="hidden" data-render-id="quarto-int-navbar-title">Fundamentos de programación con R</span> <span class="hidden" data-render-id="quarto-int-next"><span class="chapter-number">8</span>  <span class="chapter-title">Facetas</span></span> <span class="hidden" data-render-id="quarto-int-prev">Componentes</span> <span class="hidden" data-render-id="quarto-int-sidebar:/index.htmlBienvenida">Bienvenida</span> <span class="hidden" data-render-id="quarto-int-sidebar:quarto-sidebar-section-1">Visualización</span> <span class="hidden" data-render-id="quarto-int-sidebar:/1002_introduction.html&lt;span-class=&#39;chapter-number&#39;&gt;1&lt;/span&gt;--&lt;span-class=&#39;chapter-title&#39;&gt;Introducción-a-la-visualización-de-datos&lt;/span&gt;"><span class="chapter-number">1</span>  <span class="chapter-title">Introducción a la visualización de datos</span></span> <span class="hidden" data-render-id="quarto-int-sidebar:/1003_first_steps.html&lt;span-class=&#39;chapter-number&#39;&gt;2&lt;/span&gt;--&lt;span-class=&#39;chapter-title&#39;&gt;Primeros-pasos-con-ggplot2&lt;/span&gt;"><span class="chapter-number">2</span>  <span class="chapter-title">Primeros pasos con ggplot2</span></span> <span class="hidden" data-render-id="quarto-int-sidebar:/1004_components.html&lt;span-class=&#39;chapter-number&#39;&gt;3&lt;/span&gt;--&lt;span-class=&#39;chapter-title&#39;&gt;Componentes&lt;/span&gt;"><span class="chapter-number">3</span>  <span class="chapter-title">Componentes</span></span> <span class="hidden" data-render-id="quarto-int-sidebar:quarto-sidebar-section-2">Tipos de visualización</span> <span class="hidden" data-render-id="quarto-int-sidebar:/1102_distribution.html&lt;span-class=&#39;chapter-number&#39;&gt;4&lt;/span&gt;--&lt;span-class=&#39;chapter-title&#39;&gt;Gráficos-de-distribución&lt;/span&gt;"><span class="chapter-number">4</span>  <span class="chapter-title">Gráficos de distribución</span></span> <span class="hidden" data-render-id="quarto-int-sidebar:/1103_relationship.html&lt;span-class=&#39;chapter-number&#39;&gt;5&lt;/span&gt;--&lt;span-class=&#39;chapter-title&#39;&gt;Gráficos-de-relación&lt;/span&gt;"><span class="chapter-number">5</span>  <span class="chapter-title">Gráficos de relación</span></span> <span class="hidden" data-render-id="quarto-int-sidebar:/1104_comparison.html&lt;span-class=&#39;chapter-number&#39;&gt;6&lt;/span&gt;--&lt;span-class=&#39;chapter-title&#39;&gt;Gráficos-de-comparación&lt;/span&gt;"><span class="chapter-number">6</span>  <span class="chapter-title">Gráficos de comparación</span></span> <span class="hidden" data-render-id="quarto-int-sidebar:quarto-sidebar-section-3">Componentes</span> <span class="hidden" data-render-id="quarto-int-sidebar:/1202_scales.html&lt;span-class=&#39;chapter-number&#39;&gt;7&lt;/span&gt;--&lt;span-class=&#39;chapter-title&#39;&gt;Scales&lt;/span&gt;"><span class="chapter-number">7</span>  <span class="chapter-title">Scales</span></span> <span class="hidden" data-render-id="quarto-int-sidebar:/1203_facets.html&lt;span-class=&#39;chapter-number&#39;&gt;8&lt;/span&gt;--&lt;span-class=&#39;chapter-title&#39;&gt;Facetas&lt;/span&gt;"><span class="chapter-number">8</span>  <span class="chapter-title">Facetas</span></span> <span class="hidden" data-render-id="quarto-int-sidebar:quarto-sidebar-section-4">Appendices</span> <span class="hidden" data-render-id="quarto-int-sidebar:/chapters/installation.html&lt;span-class=&#39;chapter-number&#39;&gt;A&lt;/span&gt;--&lt;span-class=&#39;chapter-title&#39;&gt;Instalación&lt;/span&gt;"><span class="chapter-number">A</span>  <span class="chapter-title">Instalación</span></span> <span class="hidden" data-render-id="quarto-breadcrumbs-Componentes">Componentes</span> <span class="hidden" data-render-id="quarto-breadcrumbs-&lt;span-class=&#39;chapter-number&#39;&gt;7&lt;/span&gt;--&lt;span-class=&#39;chapter-title&#39;&gt;Scales&lt;/span&gt;"><span class="chapter-number">7</span>  <span class="chapter-title">Scales</span></span></p>
<div class="hidden" data-render-id="footer-left">
<p>Fundamentos de Programación con R (1e).<br>Adrián Cidre, 2024</p>
</div>
<div class="hidden" data-render-id="footer-center">
<p><a href="https://mastergeoforest.es//" target="_blank">Máster Geoforest</a><br> <a href="https://www.uco.es/eguiado/guias/2023-24/20286es_2023-24.pdf" target="_blank">Guía docente</a><br> <a href="https://moodle.uco.es/m2223/" target="_blank">Moodle</a></p>
</div>
<div class="hidden" data-render-id="footer-right">
<p>Este libro ha sido escrito con <a href="https://quarto.org/" target="_blank">Quarto</a>.</p>
</div>
</div>
<div id="quarto-meta-markdown" class="hidden">
<p><span class="hidden" data-render-id="quarto-metatitle">Fundamentos de programación con R - <span id="sec-scales" class="quarto-section-identifier"><span class="chapter-number">7</span>  <span class="chapter-title">Scales</span></span></span> <span class="hidden" data-render-id="quarto-twittercardtitle">Fundamentos de programación con R - <span id="sec-scales" class="quarto-section-identifier"><span class="chapter-number">7</span>  <span class="chapter-title">Scales</span></span></span> <span class="hidden" data-render-id="quarto-ogcardtitle">Fundamentos de programación con R - <span id="sec-scales" class="quarto-section-identifier"><span class="chapter-number">7</span>  <span class="chapter-title">Scales</span></span></span> <span class="hidden" data-render-id="quarto-metasitename">Fundamentos de programación con R</span> <span class="hidden" data-render-id="quarto-twittercarddesc"></span> <span class="hidden" data-render-id="quarto-ogcardddesc"></span></p>
</div>
</section>

</main> <!-- /main -->
<script id = "quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiado");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copiado");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/fundamentos-r\.netlify\.app\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a  href="/1201_components.html" class="pagination-link" aria-label="Componentes">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Componentes</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a  href="/1203_facets.html" class="pagination-link" aria-label="Facetas">
        <span class="nav-page-text"><span class='chapter-number'>8</span>  <span class='chapter-title'>Facetas</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      <div class='footer-contents'>Fundamentos de Programación con R (1e).<br>Adrián Cidre, 2024
</div>  
    </div>   
    <div class="nav-footer-center">
      <div class='footer-contents'><a href="https://mastergeoforest.es//" target="_blank">Máster Geoforest</a><br>
<a href="https://www.uco.es/eguiado/guias/2023-24/20286es_2023-24.pdf" target="_blank">Guía docente</a><br>
<a href="https://moodle.uco.es/m2223/" target="_blank">Moodle</a>
</div>  
    </div>
    <div class="nav-footer-right">
      <div class='footer-contents'>Este libro ha sido escrito con <a href="https://quarto.org/" target="_blank">Quarto</a>.
</div>  
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"selector":".lightbox","closeEffect":"zoom","openEffect":"zoom","descPosition":"bottom","loop":false});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>

</body>

</html>
