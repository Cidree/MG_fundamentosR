[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Fundamentos de programaci√≥n con R",
    "section": "",
    "text": "Bienvenida\nEste libro ‚Ä¶",
    "crumbs": [
      "Bienvenida"
    ]
  },
  {
    "objectID": "index.html#secci√≥n-primera",
    "href": "index.html#secci√≥n-primera",
    "title": "Fundamentos de programaci√≥n con R",
    "section": "Secci√≥n primera",
    "text": "Secci√≥n primera\nSecci√≥n rimera",
    "crumbs": [
      "Bienvenida"
    ]
  },
  {
    "objectID": "index.html#secci√≥n-segunda",
    "href": "index.html#secci√≥n-segunda",
    "title": "Fundamentos de programaci√≥n con R",
    "section": "Secci√≥n segunda",
    "text": "Secci√≥n segunda\nSecci√≥n segunda\n\n\n\n\n\n\nPrueba\n\n\n\nPor defecto\n\n\n\n\n\n\n\n\nPrueba 2\n\n\n\nSimple\n\n\n\n\n\n\n\n\nPrueba 3\n\n\n\nMinimal",
    "crumbs": [
      "Bienvenida"
    ]
  },
  {
    "objectID": "1002_introduction.html",
    "href": "1002_introduction.html",
    "title": "\n1¬† Introducci√≥n a la visualizaci√≥n de datos\n",
    "section": "",
    "text": "1.1 Ejemplos de visualizaci√≥n de datos\nAntes de comenzar, vamos a ver una serie de ejemplos de visualizaciones de datos que nos ayudar√°n a entender la importancia de la visualizaci√≥n de datos y c√≥mo puede ayudarnos a entender mejor la informaci√≥n que nos rodea.",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Introducci√≥n a la visualizaci√≥n de datos</span>"
    ]
  },
  {
    "objectID": "1002_introduction.html#ejemplos-de-visualizaci√≥n-de-datos",
    "href": "1002_introduction.html#ejemplos-de-visualizaci√≥n-de-datos",
    "title": "\n1¬† Introducci√≥n a la visualizaci√≥n de datos\n",
    "section": "",
    "text": "1.1.1 Art√≠culos cient√≠ficos\nLos art√≠culos cient√≠ficos son una fuente importante de informaci√≥n para la comunidad cient√≠fica. En ellos, los autores presentan sus resultados y conclusiones, y utilizan gr√°ficos para ilustrar sus hallazgos. A continuaci√≥n, se muestra un ejemplo de un gr√°fico extra√≠do de un art√≠culo cient√≠fico:\n\n\n\n\n\nFig.¬†1.1: Gr√°fico de barras con barras de error extra√≠do de Modesto et¬†al. (2021)\n\n\n\n1.1.2 Peri√≥dicos\nLos peri√≥dicos son una fuente de informaci√≥n para el p√∫blico en general. En ellos, los periodistas utilizan gr√°ficos para ilustrar noticias y tendencias. A continuaci√≥n, se muestra un ejemplo de un gr√°fico extra√≠do del peri√≥dico espa√±ol El Pa√≠s:\n\n\n\n\n\nFig.¬†1.2: Visualizaci√≥n del peri√≥dico El Pa√≠s\n\n\nEn la Figura¬†1.2 tenemos dos tipos de figuras que seguramente todos hemos visto. Dir√≠as que la forma de representar estos datos es adecuada?\nPuede que inicialmente sea complejo de ver, pero si te fijas, aunque los dos gr√°ficos parecen de barras con la misma estructura, ver√°s que el superior es un gr√°fico de barras donde ambas barras empiezan en 0, mientras que el inferior es otro gr√°fico de barras donde las barras se acumulan, de forma que el final de una barra es el inicio de la siguiente. Esto trae una serie de implicaciones en la interpretaci√≥n de los datos, ya que en el primer caso se pueden comparar las barras directamente, mientras que en el segundo caso, aunque se pueden comparar las barras, es m√°s complicado ver la diferencia entre ellas. Sabr√≠as decirme si la producci√≥n de petr√≥leo de esquisto ser√° mayor en 2025 o en 2040? La producci√≥n de gas de esquisto de 2040, cu√°nto de mayor es que la de 2010? Cinco veces mayor, siete veces mayor?\nEn este curso, aunque no podremos introducirnos en la teor√≠a y fundamentos de la visualizaci√≥n de datos, intentaremos ense√±aros a crear gr√°ficos sencillos que muestran la informaci√≥n de forma clara y comunicativa siguiendo los principios b√°sicos de la visualizaci√≥n de datos.\n\n1.1.3 Aplicaciones\nHoy en d√≠a existen muchas aplicaciones que utilizan gr√°ficos para presentar informaci√≥n a los usuarios, como pueden ser aplicaciones bancarias, de salud o de deportes. El siguiente ejemplo muestra la aplicaci√≥n de Huawei Health:\n\n\n\n\n\nFig.¬†1.3: Visualizaci√≥n de la aplicaci√≥n Huawei Health\n\n\nAqu√≠ podemos ver un gr√°fico de barras donde se representan las kcal quemadas por el usuario cada d√≠a de la √∫tlima semana. A continuaci√≥n, se muestran unos indicadores del total de kcal quemadas en la √∫ltima semana y la media semanal, ya que son valores que usualmente consultamos. Finalmente, se muestra un gr√°fico de barras apilado con el tipo de actividad que ha consumido las kcal anteriores. Adem√°s, nos permite consultar las mismas estad√≠sticas por d√≠a, mes y a√±o.\n\n1.1.4 Facturas\nSi revisas tus facturas, ver√°s que muchas de ellas incluyen gr√°ficos para ilustrar tus gastos o consumos. A continuaci√≥n, se muestra un ejemplo de una factura de Naturgy:\n\n\n\n\n\nFig.¬†1.4: Visualizaci√≥n de la factura de Naturgy\n\n\nAqu√≠ podemos ver dos gr√°ficos. Una gr√°fico de barras apilado y un gr√°fico circular. Desafortunadamente, muchos profesionales utilizan este tipo de gr√°ficos para presentar informaci√≥n, pero no son los m√°s adecuados para ello. Por ejemplo, en el gr√°fico circular, es dif√≠cil comparar las proporciones de los diferentes conceptos, ya que no es f√°cil comparar √°ngulos. Para tener una idea clara de lo que estamos comparando, tenemos que acudir a las etiquetas, lo que no es lo m√°s adecuado.\n\n\n\n\n\n\nAdvertencia\n\n\n\nLos gr√°ficos circulares son utilizados por un mont√≥n de gente, y odiados por los expertos en visualizaci√≥n de datos. En el siguiente ejemplo puedes ver un ejemplo de por qu√© no son recomendables.\n\n\n\n\n\n\n\nFig.¬†1.5: Comparaci√≥n de gr√°ficos circulares y de barras\n\n\n\n\nEn el gr√°fico anterior, se comparan los mismos datos utilizando un gr√°fico circular y un gr√°fico de barras. Cu√°l de los dos gr√°ficos te parece m√°s f√°cil de interpretar?\n\n\nPor otro lado, en el gr√°fico de barras apilado, es sencillo comparar la primera barra ya que todas tienen el mismo origen (0). Sin embargo, comparar las barras siguientes es m√°s complicado, ya que no podemos comparar directamente las alturas de las barras. Adem√°s, al no tener un eje de referencia, no podemos saber cu√°nto representa cada barra.\n\n1.1.5 Otros\nEn general, la visualizaci√≥n de datos est√° presente en muchos aspectos de nuestra vida diaria, desde la televisi√≥n, las redes sociales hasta la ciencia. Desafortunadamente, en este curso no nos dar√° tiempo a cubrir muchos aspectos de la visualizaci√≥n de datos y de las buenas pr√°cticas, si no que estar√° enfocado principalmente en aprender a utilizar ggplot2 para crear gr√°ficos sencillos pero efectivos.",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Introducci√≥n a la visualizaci√≥n de datos</span>"
    ]
  },
  {
    "objectID": "1002_introduction.html#referencias",
    "href": "1002_introduction.html#referencias",
    "title": "\n1¬† Introducci√≥n a la visualizaci√≥n de datos\n",
    "section": "Referencias",
    "text": "Referencias\n\n\nModesto, In√™s, Lieven Sterck, Vicent Arbona, Aurelio G√≥mez-Cadenas, Isabel Carrasquinho, Yves Van de Peer, y C√©lia M. Miguel. 2021. ¬´Insights Into the Mechanisms Implicated in Pinus pinaster Resistance to Pinewood Nematode¬ª. Frontiers in Plant Science 12. https://doi.org/10.3389/fpls.2021.690857.",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>Introducci√≥n a la visualizaci√≥n de datos</span>"
    ]
  },
  {
    "objectID": "1003_first_steps.html",
    "href": "1003_first_steps.html",
    "title": "\n2¬† Primeros pasos con ggplot2\n",
    "section": "",
    "text": "2.1 Objetivos\nEn esta secci√≥n, trabajaremos con los siguientes paquetes:\nC√≥digolibrary(dplyr)\nlibrary(ggplot2)\nlibrary(skimr)\nlibrary(readr)",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Primeros pasos con ggplot2</span>"
    ]
  },
  {
    "objectID": "1003_first_steps.html#sec-vis-objectives",
    "href": "1003_first_steps.html#sec-vis-objectives",
    "title": "\n2¬† Primeros pasos con ggplot2\n",
    "section": "",
    "text": "Entender la gram√°tica de gr√°ficos y su implicaci√≥n dentro de ggplot2\nEstudiar los componentes que formar un gr√°fico en ggplot2\nCrear gr√°ficos sencillos\nEntender como funciona la herencia de datos y est√©ticas\nEstudiar la diferencia entre mapear y asignar una est√©tica",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Primeros pasos con ggplot2</span>"
    ]
  },
  {
    "objectID": "1003_first_steps.html#sec-vis-data",
    "href": "1003_first_steps.html#sec-vis-data",
    "title": "\n2¬† Primeros pasos con ggplot2\n",
    "section": "\n2.2 Datos de trabajo",
    "text": "2.2 Datos de trabajo\nAntes de comenzar a trabajar con ggplot2, vamos a explorar los datos con los que vamos a trabajar. En este caso, vamos a utilizar un conjunto de datos de ejemplo que contiene informaci√≥n sobre una serie de √°rboles. Para cargar los datos, utilizaremos la funci√≥n read_rds() del paquete readr:\n\nC√≥digoinventario_tbl &lt;- read_rds(\"data/inventario_prep.rds\")\n\n\nUna vez que hemos cargado los datos, vamos a utilizar la funci√≥n skim del paquete skimr para obtener un resumen de los datos:\n\nC√≥digoskim(inventario_tbl)\n\n\nData summary\n\n\nName\ninventario_tbl\n\n\nNumber of rows\n1540\n\n\nNumber of columns\n4\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\nfactor\n2\n\n\nnumeric\n2\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: factor\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nordered\nn_unique\ntop_counts\n\n\n\nid_plots\n0\n1\nFALSE\n27\n17: 111, 11: 91, 5: 89, 14: 79\n\n\nnombre_ifn\n0\n1\nFALSE\n2\nPin: 1302, Pin: 238\n\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\ndbh_mm\n12\n0.99\n184.85\n50.97\n65.0\n153.75\n177.00\n207.00\n531.00\n‚ñÉ‚ñá‚ñÅ‚ñÅ‚ñÅ\n\n\nheight_m\n1120\n0.27\n9.49\n3.27\n3.3\n7.39\n8.57\n10.47\n21.99\n‚ñÇ‚ñá‚ñÇ‚ñÅ‚ñÅ\n\n\n\n\n\nEsta funci√≥n nos proporciona informaci√≥n sobre las variables del conjunto de datos, incluyendo el tipo de variable, el n√∫mero de observaciones, el n√∫mero de valores faltantes (NA), la media, la desviaci√≥n est√°ndar, los valores m√≠nimos y m√°ximos, y los cuartiles.\nTenemos 2 variables num√©ricas que son el di√°metro y la altura de los √°rboles, y 2 variables categ√≥ricas que son la especie (Pinus nigra o Pinus sylvestris) y un identificador de la parcela de inventario (27 parcelas distintas). Para el di√°metro, tenemos un total de 12 valores ausentes (NA) que son aproximadamente un 1% de los datos. Para la altura, tenemos 1120 valores ausentes, que son aproximadamente un 73% de los datos. En este sentido, es importante tener en cuenta que los valores ausentes pueden afectar a los an√°lisis y visualizaciones que realicemos con los datos.\n\n\n\n\n\n\nNota\n\n\n\nAunque estos datos tengan una estructura muy sencilla, nos servir√°n a la perfecci√≥n para los objetivos de este curso. Nuestro objetivo ser√° entender la gram√°tica de gr√°ficos como una base fundamental que nos permitir√° transmitir el mensaje que deseemos con nuestros datos.",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Primeros pasos con ggplot2</span>"
    ]
  },
  {
    "objectID": "1003_first_steps.html#sec-gog",
    "href": "1003_first_steps.html#sec-gog",
    "title": "\n2¬† Primeros pasos con ggplot2\n",
    "section": "\n2.3 Gram√°tica de gr√°ficos",
    "text": "2.3 Gram√°tica de gr√°ficos\nLa gram√°tica de gr√°ficos es un conjunto de reglas que definen c√≥mo se pueden construir gr√°ficos a partir de componentes b√°sicos, y fue creada por Wilkinson (2005). La idea de crear una gram√°tica de gr√°ficos es que, al igual que en la gram√°tica de un idioma, se pueden combinar diferentes elementos para crear gr√°ficos complejos. Cuando aprendemos a hablar un idioma, aprendemos las reglas gramaticales y el vocabulario, y con estos elementos podemos crear frases y textos. De la misma forma, al aprender la gram√°tica de gr√°ficos, podemos crear gr√°ficos complejos a partir de componentes b√°sicos.\nPosteriormente se cre√≥ ggplot2 (Wickham 2010), que utiliza las reglas gramaticales de la gram√°tica de gr√°ficos para crear gr√°ficos en R. ggplot2 se basa en la idea de que un gr√°fico se puede construir a partir de capas, y cada capa se puede a√±adir al gr√°fico para a√±adir informaci√≥n adicional.",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Primeros pasos con ggplot2</span>"
    ]
  },
  {
    "objectID": "1003_first_steps.html#sec-components",
    "href": "1003_first_steps.html#sec-components",
    "title": "\n2¬† Primeros pasos con ggplot2\n",
    "section": "\n2.4 Componentes",
    "text": "2.4 Componentes\nLa gram√°tica de gr√°ficos tiene una serie de componentes diferenciados Figura¬†2.1 que se definen en Wickham (2010). Estos componentes son:\n\nDatos (data): conjunto de datos que utilizamos para generar el gr√°fico.\nGeometr√≠as (geom): se refiere a la forma de representaci√≥n de nuestros datos. Algunos ejemplos de geometr√≠as son: puntos, l√≠neas, histograma, diagramas de caja, etc.\nEst√©ticas (aes): tambi√©n denominados aesthetic mappings. Se refiere a los elementos que definen la est√©tica de las geometr√≠as. Si ponemos el ejemplo de un gr√°fico de puntos (scatter plot), las est√©ticas pueden ser: su forma (punto, rect√°ngulo, tri√°ngulo‚Ä¶), su tama√±o, color, transparencia ‚Ä¶\nTransformaciones estad√≠sticas (stat):se refiere al estad√≠stico utilizado para resumir nuestros datos. Por ejemplo, para crear un histograma resumimos nuestros datos en intervalos (bins) y contamos el n√∫mero de observaciones que existen dentro de este intervalo. Este componente es m√°s avanzado que el resto, por lo que trabajaremos solamente con los valores que vienen por defecto.\nEscalas (scale): transforman los valores de los datos en est√©ticas. Nos permiten controlar los colores, tama√±os, formas, etc. Tambi√©n nos permiten controlar aspectos de las leyendas y ejes.\n\n\n\n\n\n\n\nImportante\n\n\n\nExiste una escala por cada est√©tica utilizada.\n\n\n\nFacetas (facets): consiste en generar subgr√°ficos seg√∫n un atributo. Por ejemplo, utilizando nuestros datos de inventario, podemos generar un gr√°fico de puntos donde representemos la relaci√≥n di√°metro-altura para todos los datos, o bien podemos generar facetas que generen un gr√°fico por cada una de las especies (es decir, un scatter plot para P. nigra y otro distinto para P. sylvestris).\nCoordenadas (coord): sistema de coordenadas utilizado para mapear los datos. Por defecto y normalmente, utilizaremos el sistema de coordenadas cartesiano. Otros sistemas disponibles son el sistema de coordenadas polares (que nos permiten crear los incre√≠bles gr√°ficos circulares), o tambi√©n sistemas de referencia de coordenadas para generar mapas (s√≠, con ggplot2 podemos generar mapasüó∫Ô∏è).\nTema (theme): nos permite controlar todos los aspectos relacionados con la apariencia del gr√°fico, como puede ser la fuente de texto, tama√±o de fuente, posici√≥n de elementos como la leyenda, colores de relleno, etc.\n\n\n\n\n\n\nFig.¬†2.1: Componentes principales de la gram√°tica de gr√°ficos\n\n\nFinalmente, podemos definir una capa como la combinaci√≥n de datos, est√©ticas, geometr√≠as y transformaciones estad√≠sticas (Wickham, Navarro, y Pedersen 2021), y en la mayor√≠a de las ocasiones, estos cuatro componentes se especificar√°n dentro de una funci√≥n que comienza por geom_*, aunque los datos y las est√©ticas tambi√©n se pueden especificar dentro de la funci√≥n ggplot(). No os preocup√©is, pronto veremos las diferencias entre estas opciones.\n\n\n\n\n\n\nImportante\n\n\n\nUn mismo gr√°fico puede contener m√°s de una capa y estas capas pueden (o no) compartir los mismo datos:\n\nCapa 1: utiliza los datos de inventario, como est√©ticas utiliza las variables DBH_mm y height_m, la geometr√≠a de punto y como transformaci√≥n estad√≠stica utiliza identity. Esta transformaci√≥n es utilizada por muchas geometr√≠as y significa que va a utilizar los valores tal cual aparecen en la tabla de datos, sin realizar ninguna transformaci√≥n. En t√©rminos matem√°ticos significa que \\(f(x)= x\\).\nCapa 2: utiliza los datos de inventario, como est√©ticas utiliza las variables DBH_mm y height_m, la geometr√≠a de l√≠nea y como transformaci√≥n estad√≠stica utiliza smooth. Esta transformaci√≥n utiliza un m√©todo de suavizado (por defecto una Regresi√≥n Local (LOESS)) donde se genera una l√≠nea que aproxima la tendencia de los datos.\n\n\n\n\n\n\n\n\n\n\n\nEl tipo de gr√°fico viene definido por dos elementos: el tipo de geometr√≠a y la transformaci√≥n estad√≠stica. Por poner un ejemplo relacionado con el anterior:\n\nGr√°fico de l√≠neas: se define por una geometr√≠a de l√≠nea y una transformaci√≥n estad√≠stica identity (geom_line(stat = \"identity\")).\nGr√°fico suavizado: utiliza la geometr√≠a de l√≠nea y una transformaci√≥n estad√≠stica smooth (geom_line(stat = \"smooth\")).\n\nNo obstante, los gr√°ficos comunes como el gr√°fico suavizado vienen incluidos en ggplot2 a trav√©s de una funci√≥n que utiliza la transformaci√≥n estad√≠stica adecuada por defecto, y solamente nos har√° falta llamar a la funci√≥n adecuada sin utilizar el argumento stat:\n\n\nFunci√≥n\nT.E. por defecto\n\n\n\ngeom_line()\nidentity\n\n\ngeom_smooth()\nsmooth",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Primeros pasos con ggplot2</span>"
    ]
  },
  {
    "objectID": "1003_first_steps.html#sec-first-example",
    "href": "1003_first_steps.html#sec-first-example",
    "title": "\n2¬† Primeros pasos con ggplot2\n",
    "section": "\n2.5 Ejemplo r√°pido",
    "text": "2.5 Ejemplo r√°pido\nPara digerir los conceptos anteriores, vamos a ver un ejemplo r√°pido. Para este ejemplo, vamos a eliminar los valores ausentes, ya que el objetivo es solamente entender los conceptos anteriores y no generar un gr√°fico para publicar.\n\nC√≥digoinventario_completo_tbl &lt;- na.omit(inventario_tbl)\nprint(inventario_completo_tbl)\n\n# A tibble: 418 √ó 4\n   id_plots dbh_mm height_m nombre_ifn      \n   &lt;fct&gt;     &lt;int&gt;    &lt;dbl&gt; &lt;fct&gt;           \n 1 0           296     9.26 Pinus sylvestris\n 2 0           303    10.1  Pinus sylvestris\n 3 0           105     5.48 Pinus sylvestris\n 4 0           138     7.07 Pinus nigra     \n 5 0           153     7.54 Pinus sylvestris\n 6 0           233     9.60 Pinus sylvestris\n 7 0           140     7.01 Pinus sylvestris\n 8 0           200     7.36 Pinus sylvestris\n 9 0           210    10.1  Pinus sylvestris\n10 0           142     6.25 Pinus sylvestris\n# ‚Ñπ 408 more rows\n\n\nDe este modo nos quedamos con 418 observaciones.\n\n\nL√≠neas\nSuavizado 1\nSuavizado 2\n\n\n\n\nC√≥digoinventario_completo_tbl |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m)\n    ) +\n    geom_line()\n\n\n\n\n\n\nFig.¬†2.2: Ejemplo b√°sico de gr√°fico de l√≠neas\n\n\n\n\n\n\n\nC√≥digoinventario_completo_tbl |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m)\n    ) +\n    geom_line(\n        stat = \"smooth\"\n    )\n\n\n\n\n\n\nFig.¬†2.3: Ejemplo b√°sico de l√≠nea suavizada con geom_line()\n\n\n\n\n\n\n\nC√≥digoinventario_completo_tbl |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m)\n    ) +\n    geom_smooth()\n\n\n\n\n\n\nFig.¬†2.4: Ejemplo b√°sico de l√≠nea suavizada con geom_smooth()\n\n\n\n\n\n\n\nCompara las tres gr√°ficas. En Figura¬†2.2 no utilizamos el argumento stat ya que el que viene por defecto es identity. Del mismo modo, en Figura¬†2.4 tampoco es necesario utilizar el argumento ya que stat = \"smooth\" viene por defecto.\n\n\n\n\n\n\nNota\n\n\n\nEn este curso no vamos a trabajar con transformaciones estad√≠sticas en mayor profundidad. Esta secci√≥n solamente quiere remarcar que detr√°s de cada geometr√≠a existe una transformaci√≥n estad√≠stica que viene dada por defecto.\n\n\nTambi√©n te habr√°s dado cuenta de que no hemos utilizado los componentes: facetas, escalas, coordenadas ni tema. Esto se debe a que estos componentes siempre, en todos los gr√°ficos tienen un valor por defecto. Pero todo a su tiempo. Vamos a empezar desengranando el c√≥digo anterior. Para tener una idea de los argumentos que estamos utilizando vamos a comparar los siguientes gr√°ficos derivados de Figura¬†2.4:\n\n\nM√©todo 1\nM√©todo 2\nM√©todo 3\nM√©todo 4\n\n\n\n\nC√≥digoggplot(\n    data    = inventario_completo_tbl,\n    mapping = aes(x = dbh_mm, y = height_m)\n) +\n    geom_smooth()\n\n\n\n\n\n\n\n\n\n\nC√≥digoggplot(inventario_completo_tbl, aes(x = dbh_mm, y = height_m)) +\n    geom_smooth()\n\n\n\n\n\n\n\n\n\n\nC√≥digoggplot(\n    inventario_completo_tbl, \n    aes(x = dbh_mm, y = height_m)\n) +\n    geom_smooth()\n\n\n\n\n\n\n\n\n\n\nC√≥digoinventario_completo_tbl |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m)\n    ) +\n    geom_smooth()\n\n\n\n\n\n\n\n\n\n\nComo veis, el resultado es exactamente el mismo. Normalmente utilizaremos el pipe operator (|&gt; o %&gt;%) como hacemos en el m√©todo 4 para inyectar los datos en el primer argumento de la funci√≥n ggplot() que es data. El argumento mapping tambi√©n se sabe perfectamente que es el segundo argumento de la funci√≥n, por lo que no es necesario escribir mapping = ... si no directamente aes(...). En resumen, cualquier m√©todo de escritura de c√≥digo de los anteriores se adecua en mayor o menor medida a los principios de dise√±o ordenado (Wickham 2014). No obstante, los m√©todos m√°s adecuados ser√°n los m√©todos 3 y 4 ya que nos ayudar√°n a que nuestro c√≥digo sea m√°s legible dado que la indentaci√≥n nos ayuda a ver a qu√© funci√≥n pertenece cada argumento y har√° que nuestro c√≥digo sea mucho m√°s f√°cil de leer y mantener. Finalmente, para a√±adir componentes a nuestro gr√°fico utilizamos el operador matem√°tico +.\n\n\n\n\n\n\nAdvertencia\n\n\n\nDesgraciadamente, mucha gente utiliza el m√©todo 2 para escribir c√≥digo. Aunque en el ejemplo anterior no es algo grave, es una mala costumbre para muchos otros casos. Entiendes el siguiente c√≥digo?\n\nC√≥digofilter(select(filter(inventario_completo_tbl, dbh_mm &gt;= 300), dbh_mm:nombre_ifn), nombre_ifn == \"Pinus sylvestris\")\n\n# A tibble: 29 √ó 3\n   dbh_mm height_m nombre_ifn      \n    &lt;int&gt;    &lt;dbl&gt; &lt;fct&gt;           \n 1    303     10.1 Pinus sylvestris\n 2    309     10.3 Pinus sylvestris\n 3    494     14.3 Pinus sylvestris\n 4    335     18.9 Pinus sylvestris\n 5    300     12.3 Pinus sylvestris\n 6    326     15.1 Pinus sylvestris\n 7    325     14.7 Pinus sylvestris\n 8    343     14.9 Pinus sylvestris\n 9    329     11.6 Pinus sylvestris\n10    328     18.9 Pinus sylvestris\n# ‚Ñπ 19 more rows\n\n\nY si lo escribo de este modo?\n\nC√≥digofilter(\n    select(\n        filter(\n            inventario_completo_tbl, dbh_mm &gt;= 300\n        ), \n        dbh_mm:nombre_ifn), \n    nombre_ifn == \"Pinus sylvestris\"\n)\n\n# A tibble: 29 √ó 3\n   dbh_mm height_m nombre_ifn      \n    &lt;int&gt;    &lt;dbl&gt; &lt;fct&gt;           \n 1    303     10.1 Pinus sylvestris\n 2    309     10.3 Pinus sylvestris\n 3    494     14.3 Pinus sylvestris\n 4    335     18.9 Pinus sylvestris\n 5    300     12.3 Pinus sylvestris\n 6    326     15.1 Pinus sylvestris\n 7    325     14.7 Pinus sylvestris\n 8    343     14.9 Pinus sylvestris\n 9    329     11.6 Pinus sylvestris\n10    328     18.9 Pinus sylvestris\n# ‚Ñπ 19 more rows\n\n\nY de este?\n\nC√≥digoinventario_completo_tbl |&gt; \n    filter(dbh_mm &gt;= 300) |&gt; \n    select(dbh_mm:nombre_ifn) |&gt; \n    filter(nombre_ifn == \"Pinus sylvestris\")\n\n# A tibble: 29 √ó 3\n   dbh_mm height_m nombre_ifn      \n    &lt;int&gt;    &lt;dbl&gt; &lt;fct&gt;           \n 1    303     10.1 Pinus sylvestris\n 2    309     10.3 Pinus sylvestris\n 3    494     14.3 Pinus sylvestris\n 4    335     18.9 Pinus sylvestris\n 5    300     12.3 Pinus sylvestris\n 6    326     15.1 Pinus sylvestris\n 7    325     14.7 Pinus sylvestris\n 8    343     14.9 Pinus sylvestris\n 9    329     11.6 Pinus sylvestris\n10    328     18.9 Pinus sylvestris\n# ‚Ñπ 19 more rows\n\n\nComo ves, tres formas de escribir el mismo c√≥digo aumentando la legibilidad del mismo. Estos principios se utilizar√°n a lo largo de este curso. Una lectura muy recomendable es The tidyverse style guide.",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Primeros pasos con ggplot2</span>"
    ]
  },
  {
    "objectID": "1003_first_steps.html#sec-inheritance-aes",
    "href": "1003_first_steps.html#sec-inheritance-aes",
    "title": "\n2¬† Primeros pasos con ggplot2\n",
    "section": "\n2.6 Herencia de est√©ticas",
    "text": "2.6 Herencia de est√©ticas\nVamos a continuar con el ejemplo de la l√≠nea suavizada. Vamos a a√±adir otra capa donde se muestre la distribuci√≥n de las observaciones con una geometr√≠a de punto:\n\nC√≥digoinventario_completo_tbl |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m)\n    ) +\n    geom_point() +\n    geom_smooth()\n\n\n\n\n\n\n\nEn este ejemplo estamos viendo una propiedad MUY IMPORTANTE en relaci√≥n a la generaci√≥n de gr√°ficos con ggplot2. Dentro de la funci√≥n ggplot() introducimos las est√©ticas y los datos. En siguiente lugar, las geometr√≠as heredan estos elementos. Es decir, este gr√°fico podr√≠a ser algo m√°s verboso del siguiente modo:\n\nC√≥digoggplot() +\n    geom_point(\n        data = inventario_completo_tbl,\n        aes(x = dbh_mm, y = height_m)\n    ) +\n    geom_smooth(\n        data = inventario_completo_tbl,\n        aes(x = dbh_mm, y = height_m)\n    ) \n\n\n\n\n\n\n\nEn este caso, estamos especificando los datos y las est√©ticas en cada una de las geometr√≠as. Aunque esto es posible, no es recomendable ya que aumenta la longitud del c√≥digo y puede llevar a errores si no se especifican correctamente los datos y las est√©ticas en cada una de las geometr√≠as. No obstante, en muchos casos es necesario especificar los datos y las est√©ticas en cada una de las geometr√≠as, ya que pueden utilizar est√©ticas diferentes o incluso datos diferentes. Vamos a ver un caso sencillo donde queremos representar la relaci√≥n entre el di√°metro y la altura de los √°rboles, pero queremos que los puntos de una especie sean de un color diferente a los de la otra especie. Vamos a ver una serie de ejemplos:\n\n\nColor - Todos\nColor - Puntos\nColor - Smooth\n\n\n\nEn este caso introducimos la est√©tica color dentro de la funci√≥n de ggplot(). En este caso todas las geometr√≠as heredan las est√©ticas:\n\nC√≥digoinventario_completo_tbl |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m, color = nombre_ifn)\n    ) +\n    geom_point() +\n    geom_smooth() \n\n\n\n\n\n\nFig.¬†2.5: Ejemplo de scatter plot y l√≠nea de tendencia con est√©tica de color para ambas geometr√≠as\n\n\n\n\n\n\nEn este otro caso, introducimos la est√©tica color solamente dentro de la funci√≥n geom_point(), por lo que solamente los puntos utilizan esta est√©tica:\n\nC√≥digoinventario_completo_tbl |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m)\n    ) +\n    geom_point(aes(color = nombre_ifn)) +\n    geom_smooth()\n\n\n\n\n\n\nFig.¬†2.6: Ejemplo de scatter plot y l√≠nea de tendencia con est√©tica de color para la geometr√≠a de punto\n\n\n\n\n\n\nEn este √∫ltimo caso, a√±adimos la est√©tica color a funci√≥n geom_smooth(), por lo que solamente se colorean las l√≠neas de tendencia:\n\nC√≥digoinventario_completo_tbl |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m)\n    ) +\n    geom_point() +\n    geom_smooth(aes(color = nombre_ifn))\n\n\n\n\n\n\nFig.¬†2.7: Ejemplo de scatter plot y l√≠nea de tendencia con est√©tica de color para la geometr√≠a de la l√≠nea de tendencia\n\n\n\n\n\n\n\nTambi√©n puedes ver que en los ejemplos anteriores, la geometr√≠a de punto la escribimos antes que la l√≠nea de tendencia. De este modo se dibujan en el gr√°fico, primero los puntos, y en siguiente lugar se dibuja la l√≠nea de tendencia sobre los puntos.",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Primeros pasos con ggplot2</span>"
    ]
  },
  {
    "objectID": "1003_first_steps.html#sec-map-assign-aes",
    "href": "1003_first_steps.html#sec-map-assign-aes",
    "title": "\n2¬† Primeros pasos con ggplot2\n",
    "section": "\n2.7 Mapear y asignar est√©ticas",
    "text": "2.7 Mapear y asignar est√©ticas\nPara finalizar este cap√≠tulo, vamos a ver dos conceptos que al principio pueden parecer un poco confusos, pero que ver√©is que tienen todo el sentido del mundo dentro de la gram√°tica de gr√°ficos. Vamos a comenzar viendo estas dos frases que inicialmente no tendr√°n mucho sentido, pero que entenderemos al final de esta secci√≥n:\n\nMapeamos est√©ticas a variables\nAsignamos est√©ticas a valores constantes\n\nVamos a seguir trabajando con la geometr√≠a de puntos, ya que es una de las m√°s sencillas para aprender la teor√≠a. Si busc√°is en la documentaci√≥n oficial de las funciones geom_*, encontrar√©is una secci√≥n de est√©ticas como la que se muestra en la Figura¬†2.8:\n\n\n\n\n\nFig.¬†2.8: Est√©titcas de la geometr√≠a de punto (geom_point)\n\n\n\n\n\n\n\n\nImportante\n\n\n\nTodas las geometr√≠as tienen una serie de est√©ticas obligatorias y otras opcionales. Para la geometr√≠a de punto las obligatorias son x e y\n\n\nTODAS estas est√©ticas se pueden mapear a variables, es decir, todas pueden ir dentro de la funci√≥n aes(x, y, alpha, color, fill ...). Siempre que vayan dentro de la funci√≥n aes(), estaremos mapeando la est√©tica a una variable, y por lo tanto, el valor de la est√©tica debe ser una variable de nuestros datos como en el siguiente exagerado ejemplo:\n\nC√≥digoinventario_completo_tbl |&gt; \n    ggplot(\n        aes(\n            x     = dbh_mm,\n            y     = height_m,\n            color = nombre_ifn,\n            shape = nombre_ifn,\n            size  = height_m\n        )\n    ) +\n    geom_point()\n\n\n\n\n\n\n\nSin embargo, algunas de las est√©ticas tambi√©n se pueden asignar a valores constantes. Es decir, en lugar de generar un color de punto por cada especie, podemos elegir que todos los puntos sean de color verde oscuro. O que la forma de todos los puntos sea triangular. En este caso hablamos de asignar constantes, y las est√©ticas se escriben dentro de la funci√≥n de geom_* y fuera de aes():\n\nC√≥digoinventario_completo_tbl |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m)\n    ) +\n    geom_point(\n        color = \"darkgreen\",\n        shape = \"triangle\",\n        size  = 3\n    )\n\n\n\n\n\n\n\nEn este sentido, algo que NO podemos hacer y que suele ser un fallo com√∫n al empezar con ggplot2 es lo siguiente:\n\nC√≥digoinventario_completo_tbl |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m)\n    ) +\n    geom_point(\n        color = nombre_ifn\n    )\n\n\nNos dar√° el error ‚ÄúError : objeto ‚Äònombre_ifn‚Äô no encontrado‚Äù. Como color est√° fuera de aes(), la funci√≥n est√° buscando si en el entorno existe el objeto nombre_ifn. Para entender este concepto, vamos a ver el siguiente c√≥digo:\n\nC√≥digo## Asignar un color a un objeto\nnombre_ifn &lt;- \"#456435\"\n## Gr√°fico\ninventario_completo_tbl |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m)\n    ) +\n    geom_point(\n        color = nombre_ifn\n    )\n\n\n\n\n\n\n\nCuando una est√©tica se encuentra fuera de aes(), no busca nombre_ifn dentro de las columnas de los datos, si no que lo busca en el Global Environment. Finalmente, tampoco podemos introducir constantes dentro de aes():\n\nC√≥digoinventario_completo_tbl |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m, color = \"blue\")\n    ) +\n    geom_point()\n\n\n\n\n\n\n\nEsto no funciona porque lo que hace es crear una variable constante cuyos valores son ‚Äúblue‚Äù. Es decir, esto es equivalente a:\n\nC√≥digoinventario_completo_tbl |&gt; \n    mutate(\n        colour = \"blue\"\n    ) |&gt; \n    ggplot(\n        aes(x = dbh_mm, y = height_m, color = colour)\n    ) +\n    geom_point()\n\n\n\n\n\n\n\nEs decir, no tiene nada de sentido. Para finalizar, vamos a resumir esta secci√≥n de nuevo en las frases que ve√≠amos al inicio:\n\nMapeamos est√©ticas a variables\nAsignamos est√©ticas a valores constantes",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Primeros pasos con ggplot2</span>"
    ]
  },
  {
    "objectID": "1003_first_steps.html#referencias",
    "href": "1003_first_steps.html#referencias",
    "title": "\n2¬† Primeros pasos con ggplot2\n",
    "section": "Referencias",
    "text": "Referencias\n\n\nWickham, Hadley. 2010. ¬´A layered grammar of graphics¬ª. Journal of Computational and Graphical Statistics 19 (1): 3-28. https://doi.org/10.1198/jcgs.2009.07098.\n\n\n‚Äî‚Äî‚Äî. 2014. Tidy Data. Springer International Publishing. https://doi.org/10.1007/978-3-319-24277-4.\n\n\nWickham, Hadley, Danielle Navarro, y Thomas Lin Pedersen. 2021. ggplot2: Elegant Graphics for Data Analysis. Springer International Publishing. https://doi.org/10.1007/978-3-319-24277-4.\n\n\nWilkinson, Leland. 2005. The Grammar of Graphics. https://doi.org/10.1007/0-387-28695-0.",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>Primeros pasos con ggplot2</span>"
    ]
  },
  {
    "objectID": "1004_components.html",
    "href": "1004_components.html",
    "title": "\n3¬† Componentes\n",
    "section": "",
    "text": "3.1 Capas\nEn primer lugar, vamos a generar un gr√°fico utilizando los datos del inventario forestal visto en el cap√≠tulo anterior, donde mostraremos la relaci√≥n entre la altura y el di√°metro de los √°rboles por especie.\nC√≥digo## Crear gr√°fico\nbase_gg &lt;- inventario_completo_tbl |&gt; \n    ggplot(\n      aes(x = dbh_mm, y = height_m, color = nombre_ifn)\n    ) +\n    geom_point()\n## Imprimir gr√°fico\nbase_gg\n\n\n\n\n\n\nFig.¬†3.1: Gr√°fico con capas",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Componentes</span>"
    ]
  },
  {
    "objectID": "1004_components.html#facetas",
    "href": "1004_components.html#facetas",
    "title": "\n3¬† Componentes\n",
    "section": "\n3.2 Facetas",
    "text": "3.2 Facetas\nLas facetas son una forma de dividir un gr√°fico en subgr√°ficos, de acuerdo a una variable categ√≥rica. Por defecto, ggplot2 utiliza la funci√≥n facet_null() que indica que no se desea dividir el gr√°fico. Para comprobar que esto es cierto, vamos a a√±adir esta funci√≥n al gr√°fico anterior.\n\n\n\n\n\n\nTip\n\n\n\nUna caracter√≠stica de ggplot2 es que podemos guardar el gr√°fico en un objeto y a√±adir capas adicionales posteriormente.\n\n\n\nC√≥digo## A√±adir facetas\nfacets_gg &lt;- base_gg + \n    facet_null()\n## Imprimir gr√°fico\nfacets_gg\n\n\n\n\n\n\nFig.¬†3.2: Gr√°fico sin facetas\n\n\n\n\nVemos que el resultado de la Figura¬†3.2 es exactamente igual al de la Figura¬†3.1. En el cap√≠tulo  veremos otras opciones de facetas.",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Componentes</span>"
    ]
  },
  {
    "objectID": "1004_components.html#escalas",
    "href": "1004_components.html#escalas",
    "title": "\n3¬† Componentes\n",
    "section": "\n3.3 Escalas",
    "text": "3.3 Escalas\nLas escalas se encargar de mapear los valores de los datos a los valores est√©ticos (Wickham 2010). En nuestro gr√°fico, hemos utilizado un total de tres est√©ticas:\n\n\nx: di√°metro del √°rbol en mil√≠metros\n\ny: altura del √°rbol en metros\n\ncolor: especie del √°rbol\n\nPor ello, por defecto se genera una escala para cada una de estas est√©ticas. Vamos a ver las que se generan por defecto:\n\nC√≥digo##  A√±adir escalas\nscales_gg &lt;- base_gg + \n    scale_x_continuous() +\n    scale_y_continuous() +\n    scale_color_discrete()\n## Imprimir gr√°fico\nscales_gg\n\n\n\n\n\n\nFig.¬†3.3: Escalas por defecto\n\n\n\n\nVemos varias cosas interesantes en el c√≥digo que hemos a√±adido:\n\nLas funciones de escalas empiezan por scale_*\n\nEn siguiente lugar, se a√±ade el nombre de la est√©tica que se quiere modificar\nFinalmente, se a√±aden los argumentos necesarios para modificar la escala\n\nEl tercer punto es importante. Si tenemos una variable num√©rica, su escala ser√° scale_*_continuous(), mientras que si es categ√≥rica, ser√° scale_*_discrete().\nVeremos los detalles de las escalas en el cap√≠tulo .",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Componentes</span>"
    ]
  },
  {
    "objectID": "1004_components.html#coordenadas",
    "href": "1004_components.html#coordenadas",
    "title": "\n3¬† Componentes\n",
    "section": "\n3.4 Coordenadas",
    "text": "3.4 Coordenadas\nLas coordenadas definen c√≥mo se representan los datos en el gr√°fico. Por defecto, ggplot2 utiliza un sistema de coordenadas cartesianas. Vamos a ver c√≥mo se ve nuestro gr√°fico con las coordenadas por defecto.\n\nC√≥digo## A√±adir coordenadas\ncoord_gg &lt;- base_gg + \n    coord_cartesian()\n## Imprimir gr√°fico\ncoord_gg\n\n\n\n\n\n\nFig.¬†3.4: Coordenadas por defecto\n\n\n\n\nDe nuevo, vemos que no se ha modificado el gr√°fico. Las funciones de coordenadas empiezan por coord_*, y en el cap√≠tulo  veremos otras opciones de coordenadas.",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Componentes</span>"
    ]
  },
  {
    "objectID": "1004_components.html#temas",
    "href": "1004_components.html#temas",
    "title": "\n3¬† Componentes\n",
    "section": "\n3.5 Temas",
    "text": "3.5 Temas\nLos temas definen el aspecto visual del gr√°fico. Por defecto, ggplot2 utiliza el tema theme_gray():\n\nC√≥digo## A√±adir tema\ntheme_gg &lt;- base_gg + \n    theme_gray() +\n    theme()\n## Imprimir gr√°fico\ntheme_gg\n\n\n\n\n\n\nFig.¬†3.5: Tema por defecto\n\n\n\n\nEn el c√≥digo anterior vemos dos funciones:\n\ntheme_*: se utilizan para aplicar un tema predeterminado que trae una serie de valores de los temas por defecto.\ntheme(): se utiliza para personalizar propiedades de forma unitaria.\n\nDe nuevo, veremos los detalles de los temas en el cap√≠tulo .",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Componentes</span>"
    ]
  },
  {
    "objectID": "1004_components.html#resumen",
    "href": "1004_components.html#resumen",
    "title": "\n3¬† Componentes\n",
    "section": "\n3.6 Resumen",
    "text": "3.6 Resumen\nEn este cap√≠tulo hemos visto los componentes de un gr√°fico en ggplot2 que vienen por defecto. Vamos a unir todo lo que vimos en un bloque de c√≥digo:\n\nC√≥digoinventario_completo_tbl |&gt; \n    ## A√±adir capas\n    ggplot(\n      aes(x = dbh_mm, y = height_m, color = nombre_ifn)\n    ) +\n    geom_point() +\n    ## A√±adir facetas\n    facet_null() +\n    ## A√±adir escalas\n    scale_x_continuous() +\n    scale_y_continuous() +\n    scale_color_discrete() +\n    ## A√±adir coordenadas\n    coord_cartesian() +\n    ## A√±adir tema\n    theme_gray() +\n    theme()\n\n\n\n\n\n\nFig.¬†3.6: Gr√°fico con todos los componentes",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Componentes</span>"
    ]
  },
  {
    "objectID": "1004_components.html#referencias",
    "href": "1004_components.html#referencias",
    "title": "\n3¬† Componentes\n",
    "section": "Referencias",
    "text": "Referencias\n\n\nWickham, Hadley. 2010. ¬´A layered grammar of graphics¬ª. Journal of Computational and Graphical Statistics 19 (1): 3-28. https://doi.org/10.1198/jcgs.2009.07098.",
    "crumbs": [
      "Visualizaci√≥n",
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Componentes</span>"
    ]
  },
  {
    "objectID": "1102_distribution.html",
    "href": "1102_distribution.html",
    "title": "4¬† Gr√°ficos de distribuci√≥n",
    "section": "",
    "text": "4.1 Objetivos\nAl final de este cap√≠tulo, ser√°s capaz de:",
    "crumbs": [
      "Tipos de visualizaci√≥n",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Gr√°ficos de distribuci√≥n</span>"
    ]
  },
  {
    "objectID": "1102_distribution.html#objetivos",
    "href": "1102_distribution.html#objetivos",
    "title": "4¬† Gr√°ficos de distribuci√≥n",
    "section": "",
    "text": "Utilizar etiquetas y temas predise√±ados en ggplot2\nCrear histogramas en ggplot2\nCrear gr√°ficos de densidad en ggplot2\nCrear gr√°ficos de cajas en ggplot2\nCrear gr√°ficos de viol√≠n en ggplot2\nA√±adir l√≠neas a los gr√°ficos\nA√±adir puntos con res√∫menes estad√≠sticos a los gr√°ficos",
    "crumbs": [
      "Tipos de visualizaci√≥n",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Gr√°ficos de distribuci√≥n</span>"
    ]
  },
  {
    "objectID": "1102_distribution.html#histogramas",
    "href": "1102_distribution.html#histogramas",
    "title": "4¬† Gr√°ficos de distribuci√≥n",
    "section": "\n4.2 Histogramas",
    "text": "4.2 Histogramas\nLos histogramas son una forma de visualizar la distribuci√≥n de una variable num√©rica. En un histograma, los valores de la variable se agrupan en intervalos y se muestra la frecuencia de los valores en cada intervalo. Los histogramas son √∫tiles para identificar la forma de la distribuci√≥n de los datos, la presencia de valores at√≠picos y la presencia de m√∫ltiples modas.\nPara crear un histograma en ggplot2, utilizamos la funci√≥n geom_histogram(). Tiene dos argumentos de gran importancia:\n\nbins: n√∫mero de intervalos en los que se agrupar√°n los datos. Si no se especifica, ggplot2 utilizar√° 30 intervalos.\nbinwidth: ancho de los intervalos. Si se especifica, ggplot2 calcular√° el n√∫mero de intervalos autom√°ticamente.\n\n\n\n\n\n\n\nNota\n\n\n\nEstos dos argumentos son mutuamente excluyentes. Si se especifica bins, ggplot2 ignorar√° binwidth.\n\n\nVamos a ver la diferencia entre estos dos argumentos viendo la distribuci√≥n de la longitud de los p√©talos de las flores del dataset iris:\n\n\nN√∫mero de intervalos\nAncho del intervalo\n\n\n\nAl especificar el n√∫mero de intervalos lo que hacemos es b√°sicamente indicar el n√∫mero de barras que queremos generar:\n#| standalone: true\n#| viewerHeight: 600\n\n## Load packages\nlibrary(bslib)\nlibrary(ggplot2)\nlibrary(glue)\nlibrary(shiny)\n\n## UI\nui &lt;- page_sidebar(\n    sidebar = sidebar(\n        open = \"open\",\n        width = 200,\n        sliderInput(\"bins\", \"N√∫mero de intervalos\", min = 1, max = 30, value = 15),\n    ),\n    verbatimTextOutput(\"code\") |&gt; card(),\n    plotOutput(\"plot\", width = 500) |&gt; card()\n)\n\n## Server\nserver &lt;- function(input, output, session) {\n    \n    output$code &lt;- renderPrint({\n        glue(\n            'ggplot(iris, aes(x = Petal.Length)) +\n                    geom_histogram(bins = {input$bins}, fill = \"#0073C2FF\", color = \"white\") +\n                    labs(\n                        title = \"Distribuci√≥n de longitud del p√©talo\", \n                        x = \"Longitud (mm)\", \n                        y = \"Frecuencia\"\n                    )'\n            )\n    })\n\n    ## Plot\n    output$plot &lt;- renderPlot({\n        ggplot(iris, aes(x = Petal.Length)) +\n            geom_histogram(bins = input$bins, fill = \"#0073C2FF\", color = \"white\") +\n            labs(\n                title = \"Distribuci√≥n de longitud del p√©talo\", \n                x = \"Longitud (cm)\", \n                y = \"Frecuencia\"\n            ) +\n            theme_gray(base_size = 8)\n    }, res = 96)\n}\n\n## Run app\nshinyApp(ui = ui, server = server)\n\n\nCuando seleccionamos el ancho del intervalo (binwidth), estamos seleccionando el tama√±o del intervalo en las unidades de la variable que estamos evaluando. Por ejemplo, si seleccionamos un ancho de banda de 0.3 para la longitud del p√©talo, estamos indicando que cada barra agrupar√° observaciones de 3 en 3 mil√≠metros. De 0-0.3 tendremos el primer intervalo, de 0.3-0.6 el segundo, y as√≠ sucesivamente.\n#| standalone: true\n#| viewerHeight: 600\n\n## Load packages\nlibrary(bslib)\nlibrary(ggplot2)\nlibrary(glue)\nlibrary(shiny)\n\n## UI\nui &lt;- page_sidebar(\n    sidebar = sidebar(\n        open = \"open\",\n        width = 200,\n        sliderInput(\"bins\", \"Ancho del intervalo\", min = 0.1, max = 2, value = .2, step = .1),\n    ),\n    verbatimTextOutput(\"code\") |&gt; card(),\n    plotOutput(\"plot\", width = 500) |&gt; card()\n)\n\n## Server\nserver &lt;- function(input, output, session) {\n    \n    output$code &lt;- renderPrint({\n        glue(\n            '\n            ggplot(iris, aes(x = Petal.Length)) +\n                    geom_histogram(binwidth = {input$bins}, fill = \"#0073C2FF\", color = \"white\") +\n                    labs(\n                        title = \"Distribuci√≥n de longitud del p√©talo\", \n                        x = \"Longitud (mm)\", \n                        y = \"Frecuencia\"\n                    )'\n            )\n    })\n\n    ## Plot\n    output$plot &lt;- renderPlot({\n        ggplot(iris, aes(x = Petal.Length)) +\n            geom_histogram(binwidth = input$bins, fill = \"#0073C2FF\", color = \"white\") +\n            labs(\n                title = \"Distribuci√≥n de longitud del p√©talo\", \n                x     = \"Longitud (mm)\", \n                y     = \"Frecuencia\"\n            ) +\n            theme_gray(base_size = 8)\n    }, res = 96)\n}\n\n## Run app\nshinyApp(ui = ui, server = server)\n\n\n\n\n\n\n\n\n\nTip\n\n\n\nLos c√≥digos hexadecimales son una forma de representar colores en HTML y CSS. En R, podemos utilizarlos para cambiar el color de los gr√°ficos. En este caso, el color #0073C2FF representa un azul claro. Puedes utilizar generadores de colores online como este para elegir un color.\n\n\nUn histograma es b√°sicamente esto. Para el color de relleno utilizamos el argumento fill y para el color del contorno utilizamos el argumento color, y este patr√≥n seguir√° siendo el mismo para los otros tipos de gr√°ficos de ggplot2.\nTambi√©n te habr√°s dado cuenta que hemos a√±adido una funci√≥n nueva que es labs(). Esta funci√≥n nos permite a√±adir etiquetas al gr√°fico como:\n\ntitle: t√≠tulo del gr√°fico.\nsubtitle: subtitulo del gr√°fico.\nx: t√≠tulo del eje x.\ny: t√≠tulo del eje y.\ncaption: pie de figura.\n\nSi bien es cierto que los histogramas son una forma de visualizar la distribuci√≥n de una sola variable, tambi√©n podemos crear histogramas para comparar la distribuci√≥n de una variable num√©rica entre diferentes grupos. Esto puede ser muy conveniente, ya que si nos fijamos en las figuras anteriores, podemos ver que si indicamos el n√∫mero de intervalos adecuado sigue una distribuci√≥n bimodal.\nVamos a ver qu√© pasa si comparamos la distribuci√≥n de la longitud de los p√©talos de las flores del dataset iris entre las diferentes especies de flores. Para ello, utilizamos el argumento fill en la funci√≥n aes() para indicar la variable categ√≥rica que queremos comparar:\n\nC√≥digoggplot(iris, aes(x = Petal.Length, fill = Species)) +\n    geom_histogram(bins = 30, color = \"white\") +\n    labs(\n        title    = \"Distribuci√≥n de longitud del p√©talo por especie\", \n        subtitle = \"La especie I. setosa tiene una longitud de p√©talo menor que I. versicolor e I. virginica\",\n        x        = \"Longitud (mm)\", \n        y        = \"Frecuencia\",\n        caption  = \"Autor: Adri√°n Cidre\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\nFig.¬†4.1: Distribuci√≥n de longitud del p√©talo por especie\n\n\n\n\nAh√° ü§î! Gracias a utilizar una est√©tica m√°s podemos ver que la distribuci√≥n no es bimodal, si no que son distribuciones de especies de flores distintas. En esencia, a√±adir una est√©tica m√°s puede ser visto como a√±adir una dimensi√≥n m√°s al gr√°fico.\n\n\n\n\n\n\nNota\n\n\n\nA partir de ahora vamos a ir a√±adiendo nuevas funciones y argumentos a nuestros gr√°ficos. No te preocupes si no entiendes todo a la primera, poco a poco iremos viendo c√≥mo se utilizan y para qu√© sirven. En este caso hemos a√±adido theme_minimal() que nos permite cambiar el tema base del gr√°fico. Existen una serie de temas predefinidos que empiezan por theme_*().",
    "crumbs": [
      "Tipos de visualizaci√≥n",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Gr√°ficos de distribuci√≥n</span>"
    ]
  },
  {
    "objectID": "1102_distribution.html#gr√°ficos-de-densidad",
    "href": "1102_distribution.html#gr√°ficos-de-densidad",
    "title": "4¬† Gr√°ficos de distribuci√≥n",
    "section": "\n4.3 Gr√°ficos de densidad",
    "text": "4.3 Gr√°ficos de densidad\nLos gr√°ficos de densidad son una forma de visualizar la distribuci√≥n de una variable num√©rica. A diferencia de los histogramas, los gr√°ficos de densidad no agrupan los datos en intervalos, sino que muestran la estimaci√≥n de densidad kernel de los datos. Los gr√°ficos de densidad son √∫tiles para identificar la forma de la distribuci√≥n de los datos, ya que son una versi√≥n suavizada de los histogramas.\nPara crear un gr√°fico de densidad en ggplot2, utilizamos la funci√≥n geom_density(). B√°sicamente, se va a generar una l√≠nea que nos va a indicar la densidad de probabilidad de los datos. Como es una l√≠nea, tiene una serie de est√©ticas que podemos modificar a continuaci√≥n:\n#| standalone: true\n#| viewerHeight: 600\n\n## Load packages\nlibrary(bslib)\nlibrary(ggplot2)\nlibrary(glue)\nlibrary(shiny)\n\n## UI\nui &lt;- page_sidebar(\n    sidebar = sidebar(\n        open  = \"open\",\n        width = 200,\n        selectInput(\n            inputId  = \"linetype_input\",\n            label    = \"Linetype\",\n            choices  = c(\"solid\", \"dashed\", \"dotted\",\n                         \"dotdash\", \"longdash\", \"twodash\"),\n            selected = \"solid\"\n        ),\n        sliderInput(\n            inputId = \"linewidth_input\",\n            label   = \"Linewidth\",\n            min     = 0,\n            max     = 4,\n            value   = 1,\n            step    = .5\n        ),\n        checkboxInput(\n            inputId = \"fill_input\",\n            label   = \"Rellenar?\",\n            value   = FALSE\n        )\n    ),\n    verbatimTextOutput(\"code\") |&gt; card(),\n    plotOutput(\"plot\", width = 500) |&gt; card()\n)\n\n## Server\nserver &lt;- function(input, output, session) {\n    \n    output$code &lt;- renderPrint({\n        \n        if (input$fill_input) {\n            glue(\n            'ggplot(iris, aes(x = Petal.Length)) +\n                geom_density(\n                    color     = \"darkred\",\n                    fill      = \"gray30\",\n                    linetype  = \"{input$linetype_input}\",\n                    linewidth = {input$linewidth_input}\n                ) +\n                labs(\n                    title = \"Distribuci√≥n de longitud del p√©talo\", \n                    x     = \"Longitud (mm)\", \n                    y     = \"Probabilidad (%)\"\n                ) +\n                theme_bw(base_size = 8)'\n            )\n        } else {\n            glue(\n            'ggplot(iris, aes(x = Petal.Length)) +\n                geom_density(\n                    color     = \"darkred\",\n                    linetype  = \"{input$linetype_input}\",\n                    linewidth = {input$linewidth_input}\n                ) +\n                labs(\n                    title = \"Distribuci√≥n de longitud del p√©talo\", \n                    x     = \"Longitud (mm)\", \n                    y     = \"Probabilidad (%)\"\n                ) +\n                theme_bw()'\n            )\n        }\n    })\n\n    ## Plot\n    output$plot &lt;- renderPlot({\n        ggplot(iris, aes(x = Petal.Length)) +\n            geom_density(\n                color     = \"darkred\",\n                linetype  = input$linetype_input,\n                linewidth = input$linewidth_input,\n                fill      = if (input$fill_input) \"gray30\" else NA\n            ) +\n            labs(\n                title = \"Distribuci√≥n de longitud del p√©talo\", \n                x     = \"Longitud (mm)\", \n                y     = \"Probabilidad (%)\"\n            ) +\n            theme_bw(base_size = 8)\n    }, res = 96)\n}\n\n## Run app\nshinyApp(ui = ui, server = server)\n\n4.3.1 Ejercicio 1\nFinalmente, al igual que con los histogramas, podemos comparar la distribuci√≥n de la longitud del p√©talo entre las diferentes especies de flores del dataset iris. Te atreves a intentar a√±adir la parte del c√≥digo que falta? El resultado deber√≠a ser el indicado en la Figura¬†4.2:\n\n\n\n\n\n\n\nFig.¬†4.2: Resultado del ejercicio 1\n\n\n\n\nEn total hay que a√±adir tres elementos:\n\nTransparencia (necesaria para poder ver la superposici√≥n de densidades)\nEliminar color de contorno\nCrear un gr√°fico de densidad por especie dentro del mismo gr√°fico\n\n\n\nEjercicio 1\nSoluci√≥n\n\n\n\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\n\n\nEl argumento aes(fill = Species) tambi√©n se puede introducir en la funci√≥n ggplot().\nggplot(iris, aes(x = Petal.Length)) +\n    geom_density(\n        aes(fill = Species),\n        color    = NA,\n        alpha    = .8\n    ) +\n    labs(\n        title = \"Distribuci√≥n de longitud del p√©talo\",\n        x     = \"Longitud (mm)\", \n        y     = \"Probabilidad (%)\"\n    ) +\n    theme_bw()\n\n\n\n\n4.3.2 Ejercicio 2\nEn los siguientes ejercicios vamos a trabajar con los datos de inventario. Vamos a empezar cargando los datos, convertirlos a tibble y vamos a ver de nuevo su estructura:\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\nEl ejercicio consiste en generar un histograma de la distribuci√≥n diam√©trica (en cent√≠metros), adem√°s generando un gr√°fico por especie. Utiliza el siguiente bloque de c√≥digo y practica todo lo que hemos visto hasta ahora:\n\n\nEjercicio 2\nResultado\n\n\n\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\n\n\nEl siguiente c√≥digo es una de muchas opciones.\n\nC√≥digoggplot(\n    inventario_tbl, \n    aes(x = dbh_mm / 10, fill = nombre_ifn)\n) +\n    geom_histogram(\n        bins  = 25, \n        color = \"snow\"\n    ) +\n    labs(\n        title = \"Distribuci√≥n diam√©trica por especie\",\n        x     = \"Di√°metro (cm)\", \n        y     = \"Frecuencia\",\n        fill  = \"Especie\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\nFig.¬†4.3: Resultado del ejercicio 2\n\n\n\n\n\n\n\nEn la Figura¬†4.3 hemos a√±adido el argumento fill dentro de la funci√≥n labs(). Cuando utilizamos una est√©tica como color, fill, shape‚Ä¶ dentro de aes(), podemos utilizar el nombre de esta est√©tica dentro de labs() para modificar el t√≠tulo de la leyenda.\n\n4.3.3 Ejercicio 3\nGenerar un gr√°fico de densidad para la altura de los √°rboles por especie.\n\n\nEjercicio 3\nResultado\n\n\n\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\n\n\nEl siguiente c√≥digo es una de muchas opciones.\n\nC√≥digoggplot(\n    inventario_tbl, \n    aes(x = height_m, fill = nombre_ifn)\n) +\n    geom_density(\n        alpha = .7\n    ) +\n    labs(\n        title = \"Distribuci√≥n de alturas por especie\",\n        x     = \"Altura (m)\", \n        y     = \"Probabilidad (%)\",\n        fill  = \"Especie\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\nFig.¬†4.4: Resultado del ejercicio 3\n\n\n\n\n\n\n\n\n4.3.4 Extra - A√±adir l√≠neas\nAlgo com√∫n es a√±adir l√≠neas a los gr√°ficos que representen alg√∫n valor importante como la media o la mediana. En esta breve secci√≥n vamos a ver como a√±adir estas dos l√≠neas a un histograma.\nVamos a empezar con un histograma de la distribuci√≥n diam√©trica de P. sylvestris:\n\nC√≥digoinventario_tbl |&gt; \n    filter(nombre_ifn == \"Pinus sylvestris\") |&gt; \n    ggplot(\n        aes(x = dbh_mm)\n    ) +\n    geom_histogram(\n        color = \"snow\",\n        fill  = \"#0073C2FF\"\n    ) +\n    theme_bw()\n\n\n\n\n\n\nFig.¬†4.5: Distribuci√≥n diam√©trica de Pinus sylvestris\n\n\n\n\nLa idea es a√±adir una l√≠nea vertical que nos se√±ale donde se encuentran la media y la mediana. Para ello, tenemos la funci√≥n geom_vline(). El argumento m√°s importante es:\n\n\nxintercept: valor en el eje x donde se va a situar la l√≠nea.\n\nEl resto de argumentos pueden consultarse en la documentaci√≥n de la funci√≥n, y ser√°n los comunes a geometr√≠as de l√≠nea: color, linewidth, linetype‚Ä¶\n\nC√≥digo## Filtrar datos de Pinus sylvestris\n## Crear columna de di√°metro en cm\npsylvestris_tbl &lt;- inventario_tbl |&gt; \n    filter(nombre_ifn == \"Pinus sylvestris\") |&gt; \n    mutate(\n        dbh_cm = dbh_mm / 10\n    )\n    \n## Gr√°fico\npsylvestris_tbl |&gt; \n    ggplot(\n        aes(x = dbh_cm)\n    ) +\n    geom_histogram(\n        color = \"snow\",\n        fill  = \"#0073C2FF\",\n        alpha = .7  \n    ) +\n    geom_vline(\n        aes(xintercept = mean(psylvestris_tbl$dbh_cm, na.rm = TRUE)),\n        color = \"darkred\",\n        size  = 1\n    ) +\n    geom_vline(\n        xintercept = median(psylvestris_tbl$dbh_cm, na.rm = TRUE),\n        color      = \"darkorange\",\n        size       = 1\n    ) +\n    labs(\n        title = \"Distribuci√≥n diam√©trica de Pinus sylvestris\",\n        x     = \"Di√°metro (cm)\", \n        y     = \"Frecuencia\"\n    ) +\n    theme_bw()\n\n\n\n\n\n\nFig.¬†4.6: Distribuci√≥n diam√©trica de Pinus sylvestris con l√≠neas\n\n\n\n\nComo solamente utilizamos un valor que generamos con mean() y median(), no es necesario utilizar aes() en geom_vline(). Se muestran ambas opciones para mostrar que es posible utilizar cualquiera de las dos opciones.",
    "crumbs": [
      "Tipos de visualizaci√≥n",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Gr√°ficos de distribuci√≥n</span>"
    ]
  },
  {
    "objectID": "1102_distribution.html#boxplot",
    "href": "1102_distribution.html#boxplot",
    "title": "4¬† Gr√°ficos de distribuci√≥n",
    "section": "\n4.4 Boxplot",
    "text": "4.4 Boxplot\nLos boxplot (gr√°ficos de cajas o bigotes) son una forma de visualizar la distribuci√≥n de una variable num√©rica. En un gr√°fico de cajas, se muestra un resumen de la distribuci√≥n de los datos, incluyendo la mediana, los cuartiles y los valores at√≠picos. Los gr√°ficos de cajas son √∫tiles para identificar la presencia de valores at√≠picos y la simetr√≠a de la distribuci√≥n.\n\n\n\n\n\nFig.¬†4.7: Partes de un boxplot. Fuente: R Graph Gallery\n\n\nAunque es un gr√°fico que nos da un resumen estad√≠stico muy bueno, es un gr√°fico que nunca se debe utilizar solo. Un boxplot nos est√° mostrando cinco valores principales: m√≠nimo, primer cuartil, mediana, tercer cuartil y m√°ximo. Sin embargo, no sabemos nada del resto de valores. F√≠jate en los siguientes boxplot:\n\n\n\n\n\n\n\nFig.¬†4.8: Boxplots con datos ficticios con la misma forma\n\n\n\n\nAmbos gr√°ficos tienen exactamente la misma forma, pero como puedes ver en los puntos, los datos son muy distintos. Es por ello que se suelen utilizar variantes del boxplot o el boxplot combinado con otras geometr√≠as como el violin plot.\nUna vez vista esta debilidad de los boxplot, vamos a generar uno para la distribuci√≥n de la longitud de los p√©talos del dataset de iris. En este caso, va a ser el primer gr√°fico de distribuci√≥n donde utilicemos ambas est√©ticas de los ejes x e y.\nLa funci√≥n geom_boxplot() tiene un mont√≥n de argumentos que podemos modificar. Los outliers se representan como puntos, y por ende, podemos modificar todo aquello relacionado con ellos con argumentos que empiezan por outlier.*. Por ejemplo, outlier.shape, outlier.size, outlier.color‚Ä¶\n\nC√≥digobase_boxplot &lt;- ggplot(iris, aes(x = Species, y = Petal.Length)) +\n    geom_boxplot(\n        fill          = \"orangered\",\n        alpha         = .4,\n        outlier.shape = 21,\n        outlier.size  = 3,\n        outlier.color = \"black\",\n        varwidth      = TRUE\n    ) +\n    labs(\n        title = \"Distribuci√≥n de la longitud del p√©talo por especie\",\n        x     = \"Especie\", \n        y     = \"Longitud (mm)\"\n    ) +\n    theme_minimal()\n    \nbase_boxplot\n\n\n\n\n\n\nFig.¬†4.9: Boxplot de la longitud del p√©talo\n\n\n\n\nHemos guardo el gr√°fico en un objeto llamado base_boxplot para poder a√±adir m√°s elementos en la siguiente secci√≥n.\n\n4.4.1 Boxplot + Jitter\nPara a√±adir la distribuci√≥n de los datos en un boxplot, podemos utilizar la funci√≥n geom_point():\n\nC√≥digobase_boxplot +\n    geom_point()\n\n\n\n\n\n\nFig.¬†4.10: Boxplot de la longitud del p√©talo con geom_point()\n\n\n\n\nSin embargo, como puedes ver, los puntos est√°n superpuestos. Para evitar esto, podemos utilizar la funci√≥n position_jitter() dentro del argumento position que nos permite a√±adir un poco de ruido a los puntos para que no se superpongan. Esto significa que los puntos tendr√°n un determinando porcentaje (0-1) de variaci√≥n en el eje x con el argumento width y en el eje y con el argumento height. Utiliza la siguiente herramienta para ver como funciona:\n#| standalone: true\n#| viewerHeight: 600\n\n## Load packages\nlibrary(bslib)\nlibrary(ggplot2)\nlibrary(glue)\nlibrary(shiny)\n\n## UI\nui &lt;- page_sidebar(\n    sidebar = sidebar(\n        open = \"open\",\n        width = 200,\n        sliderInput(\"width_j\", \"Width\", min = 0, max = 1, value = .5, step = .1),\n        sliderInput(\"height_j\", \"Height\", min = 0, max = 1, value = .5, step = .1)\n    ),\n    verbatimTextOutput(\"code\") |&gt; card(),\n    plotOutput(\"plot\", width = 500) |&gt; card()\n)\n\n## Server\nserver &lt;- function(input, output, session) {\n    \n    output$code &lt;- renderPrint({\n        glue(\n            '\n            base_boxplot +\n                geom_point(\n                    position = position_jitter(\n                        width  = {input$width_j},\n                        height = {input$height_j}\n                    ),\n                    alpha    = .7\n                )'\n            )\n    })\n\n    ## Plot\n    output$plot &lt;- renderPlot({\n        ggplot(iris, aes(x = Species, y = Petal.Length)) +\n            geom_boxplot(\n                fill          = \"orangered\",\n                alpha         = .4,\n                outlier.shape = 21,\n                outlier.size  = 3,\n                outlier.color = \"black\",\n                varwidth      = TRUE\n            ) +\n            labs(\n                title = \"Distribuci√≥n de la longitud del p√©talo por especie\",\n                x     = \"Especie\", \n                y     = \"Longitud (mm)\"\n            ) +\n            theme_minimal() +\n                        geom_point(\n                            position = position_jitter(\n                                width  = {input$width_j},\n                                height = {input$height_j}\n                            ),\n                            alpha    = .7\n                        ) +\n                    theme_gray(base_size = 8)\n    }, res = 96)\n}\n\n## Run app\nshinyApp(ui = ui, server = server)\nSi ambos son igual a 0, significa que no se a√±ade ruido. si aumentamos width, veremos que los datos se mantienen en sus valores originales seg√∫n la variable de longitud del p√©talo, pero se mueven aleatoriamente a lo largo del eje x. De este modo podemos ver mejor la distribuci√≥n. No obstante, esto es recomendable solamente en variables categ√≥ricas para que los puntos no est√©n unos encima de otros. En variables num√©ricas no tiene sentido ya que estamos modificando los datos. Es decir, en este ejemplo height debe ser igual a 0.\n\n\n\n\n\n\nNota\n\n\n\nSi utilizamos un valor igual o superior a 0.5 los puntos de distintas categor√≠as se superpondr√°n.\n\n\nComo esta geometr√≠a es muy com√∫n, ggplot2 tiene la funci√≥n geom_jitter() que es un atajo para geom_point(position = position_jitter()):\n\nC√≥digobase_boxplot +\n    geom_jitter(height = 0, width = .2)\n\n\n\n\n\n\nFig.¬†4.11: Boxplot de la longitud del p√©talo con geom_jitter()\n\n\n\n\n\n4.4.2 Ejercicio 4\nGenerar un boxplot de la distribuci√≥n diam√©trica por especie. Adem√°s, a√±adir la distribuci√≥n de los puntos. Para practicar, utiliza la documentaci√≥n de geom_boxplot() para modificar distintos argumentos.\n\n\nEjercicio 4\nResultado\nViolin plot\nResumen\n\n\n\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\n\n\nEl siguiente c√≥digo es una de muchas opciones.\n\nC√≥digo## Crear boxplot\nggplot(\n    inventario_tbl, \n    aes(x = nombre_ifn, y = dbh_mm / 10)\n) +\n    geom_boxplot(\n        fill          = \"#82BE1F\",\n        outlier.shape = 21,\n        outlier.size  = 3,\n        outlier.fill  = \"#E121DB\",\n        varwidth      = TRUE,\n        width         = .5\n    ) +\n    geom_jitter(\n        color = \"#7D9E69\",\n        height = 0,\n        width  = .4,\n        alpha  = .3\n    ) +\n    labs(\n        title = \"Distribuci√≥n diam√©trica por especie\",\n        x     = \"Especie\", \n        y     = \"Di√°metro (cm)\"\n    ) +\n    theme_minimal()\n\n\n\n\n\n\nFig.¬†4.12: Resultado del ejercicio 4\n\n\n\n\n\n4.4.3 Extra - A√±adir media\nTambi√©n es posible a√±adir la localizaci√≥n de la media mediante un punto en un boxplot. Para ello, utilizamos la funci√≥n geom_point():\n\nC√≥digobase_boxplot +\n    geom_point()\n\n\n\n\n\n\n\nBueeeno üòÖ‚Ä¶ Recuerdas cu√°ndo habl√°bamos de las transformaciones estad√≠sticas en Secci√≥n 2.4? Pues por defecto geom_point() utiliza stat = \"identity\", que quer√≠a decir que no se aplica ninguna transformaci√≥n, y por lo tanto \\(f(x) = x\\). Ser√° ggplot2 tan m√°gico que nos dejar√° decir que realice una transformaci√≥n estad√≠stica en la que convierta los puntos a la media? S√≠, pero debemos utilizar la transformaci√≥n estad√≠stica summary, y elegir una funci√≥n de resumen con el argumento fun. En realidad, podemos a√±adir varias funciones que puedes probar aqu√≠:\n#| standalone: true\n#| viewerHeight: 600\n\n## Load packages\nlibrary(bslib)\nlibrary(ggplot2)\nlibrary(glue)\nlibrary(shiny)\n\n## UI\nui &lt;- page_sidebar(\n    sidebar = sidebar(\n        open = \"open\",\n        width = 200,\n        selectInput(\n            inputId = \"fun_input\", \n            label   = \"Funci√≥n\", \n            choices = c(\"min\", \"max\", \"mean\", \"median\", \"quantile\")\n        )\n    ),\n    verbatimTextOutput(\"code\") |&gt; card(),\n    plotOutput(\"plot\", width = 500) |&gt; card()\n)\n\n## Server\nserver &lt;- function(input, output, session) {\n    \n    output$code &lt;- renderPrint({\n        glue(\n            '\n            base_boxplot +\n                geom_point(\n                    stat  = \"summary\",\n                    fun   = {input$fun_input},\n                    shape = 4,\n                    size  = 3,\n                    color = \"red\"\n                )'\n            )\n    })\n\n    ## Plot\n    output$plot &lt;- renderPlot({\n        ggplot(iris, aes(x = Species, y = Petal.Length)) +\n            geom_boxplot(\n                fill          = \"orangered\",\n                alpha         = .4,\n                outlier.shape = 21,\n                outlier.size  = 3,\n                outlier.color = \"black\",\n                varwidth      = TRUE\n            ) +\n            labs(\n                title = \"Distribuci√≥n de la longitud del p√©talo por especie\",\n                x     = \"Especie\", \n                y     = \"Longitud (mm)\"\n            ) +\n            theme_minimal() +\n            geom_point(\n                stat  = \"summary\",\n                fun   = {input$fun_input},\n                shape = 4,\n                size  = 3,\n                color = \"red\"\n            ) +\n            theme_gray(base_size = 8)\n    }, res = 96)\n}\n\n## Run app\nshinyApp(ui = ui, server = server)\nCualquier funci√≥n que se pueda aplicar a un vector num√©rico, se puede a√±adir dentro del argumento fun, y esto incluye funciones personalizadas.\n\n\n\n\n\n\nTip\n\n\n\nSi quieres ver las opciones del argumento shape, puedes consultar la documentaci√≥n de la funci√≥n points().\n\n\n\n\n\nEl violin plot es una forma de visualizar la distribuci√≥n de una variable num√©rica. A diferencia del boxplot, el violin plot muestra la distribuci√≥n de los datos de forma m√°s detallada, de forma que no es necesario a√±adir una capa de puntos jitter para tener una idea de la distribuci√≥n de los datos.\n\nC√≥digobase_violin &lt;- ggplot(iris, aes(x = Species, y = Petal.Length)) +\n  geom_violin(\n      fill  = \"#0073C2FF\",\n      color = \"white\"\n  ) +\n  labs(\n      title = \"Distribuci√≥n de la longitud del p√©talo por especie\",\n      x     = \"Especie\", \n      y     = \"Longitud (mm)\"\n  ) +\n  theme_minimal()\n  \nbase_violin\n\n\n\n\n\n\nFig.¬†4.13: Violin plot de la longitud del p√©talo\n\n\n\n\nEn la Figura¬†4.13 vemos que los gr√°ficos son m√°s o menos anchos. Cuanto m√°s anchos, m√°s datos hay en esa zona. Para tener una idea de lo que significa, podemos a√±adir una capa de puntos y as√≠ entenderlo mejor:\n\nC√≥digobase_violin +\n  geom_jitter(\n      alpha  = .5,\n      height = 0\n  ) \n\n\n\n\n\n\nFig.¬†4.14: Violin plot de la longitud del p√©talo con geom_jitter()\n\n\n\n\nComo puedes ver, los puntos se distribuyen en funci√≥n de la anchura del violin plot. Si la anchura es mayor, significa que hay m√°s datos en esa zona.\nOpciones interesantes para modificar el violin plot son:\n\ntrim: si es FALSE, el violin plot se extender√° hasta los valores extremos de los datos. Si es TRUE (por defecto), se extender√° hasta el valor m√°s extremo que no sea un valor at√≠pico.\nscale: si es area (por defecto), el √°rea de cada violin es proporcional al n√∫mero de observaciones. Si es count, el ancho de cada violin es proporcional al n√∫mero de observaciones.\ndraw_quantiles: si es TRUE, se dibujar√°n los cuantiles del 25%, 50% y 75% en el violin plot.\n\n\nC√≥digoggplot(iris, aes(x = Species, y = Petal.Length)) +\n  geom_violin(\n      fill  = \"#0073C2FF\",\n      color = \"white\",\n      trim  = TRUE,\n      scale = \"area\",\n      draw_quantiles = c(.25, .5, .75),\n  ) +\n  labs(\n      title = \"Distribuci√≥n de la longitud del p√©talo por especie\",\n      x     = \"Especie\", \n      y     = \"Longitud (mm)\"\n  ) +\n  theme_minimal()\n\n\n\n\n\n\nFig.¬†4.15: Violin plot de la longitud del p√©talo con opciones\n\n\n\n\n\n4.4.4 Ejercicio 5\nGenerar un violin plot de la distribuci√≥n diam√©trica por especie de inventario_tbl. Adem√°s, a√±adir una capa de puntos para ver la distribuci√≥n de los datos. Visualizar la diferencia entre scale = \"area\" y scale = \"count\" y quedarse con el que te parezca m√°s adecuado (en la pesta√±a ‚ÄúResultado‚Äù se explica cu√°l es la mejor opci√≥n).\nEl resultado de este ejercicio lo utilizaremos en Secci√≥n 4.4.5, as√≠ que guarda el violin plot en un objeto llamado violin_ej5_gg.\n\n\nEjercicio 5\nResultado\n\n\n\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\n\n\nEl siguiente c√≥digo es una de muchas opciones.\nCon scale = \"count\", vemos que de P. sylvestris tenemos muchos m√°s datos. Si utilizamos scale = \"area, esto no lo sabemos. Por lo tanto, es mejor utilizar scale = \"count\".\n\nC√≥digo## Crear violin plot\nviolin_ej5_gg &lt;- ggplot(\n    inventario_tbl, \n    aes(x = nombre_ifn, y = dbh_mm / 10)\n) +\n    geom_violin(\n        fill  = \"#82BE1F\",\n        color = \"transparent\",\n        trim  = TRUE,\n        scale = \"count\"\n    ) +\n    labs(\n        title = \"Distribuci√≥n diam√©trica por especie\",\n        x     = \"Especie\", \n        y     = \"Di√°metro (cm)\"\n    ) +\n    theme_bw()\n## Imprimir\nviolin_ej5_gg\n\n\n\n\n\n\nFig.¬†4.16: Resultado del ejercicio 5\n\n\n\n\n\n\n\n\n4.4.5 Ejercicio 6\nEn la Secci√≥n 4.4.4 hemos generado un diam√©trica por especie que guardamos como violin_ej5_gg. A este gr√°fico, a√±adir un boxplot y un punto que represente la media de la distribuci√≥n.\n\n\nEjercicio 6\nResultado\n\n\n\n\nPlease enable JavaScript to experience the dynamic code cell content on this page.\n\n\nEl siguiente c√≥digo es una de muchas opciones.\n\nC√≥digoviolin_ej5_gg +\n    geom_boxplot(\n        fill          = \"transparent\",\n        outliers      = FALSE,\n        varwidth      = TRUE,\n        width         = .2\n    ) +\n    geom_point(\n        stat  = \"summary\",\n        fun   = \"mean\",\n        shape = 19,\n        size  = 3,\n        color = \"red\"\n    )\n\n\n\n\n\n\nFig.¬†4.17: Resultado del ejercicio 6\n\n\n\n\n\n\n\nEnhorabuena! Has llegado al final de la secci√≥n de distribuciones. En la siguiente secci√≥n vamos a ver c√≥mo podemos comparar distribuciones entre diferentes grupos.\n\n\n\nEn esta secci√≥n hemos aprendido a visualizar la distribuci√≥n de una variable num√©rica utilizando distintos tipos de gr√°ficos. Hemos visto c√≥mo crear histogramas, gr√°ficos de densidad, boxplots y violin plots. Adem√°s, hemos aprendido a a√±adir capas de puntos a los gr√°ficos para ver la distribuci√≥n de los datos, res√∫menes estad√≠sticos como la media y a modificar distintos argumentos de las geometr√≠as.",
    "crumbs": [
      "Tipos de visualizaci√≥n",
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Gr√°ficos de distribuci√≥n</span>"
    ]
  },
  {
    "objectID": "chapters/installation.html",
    "href": "chapters/installation.html",
    "title": "Ap√©ndice A ‚Äî Instalaci√≥n",
    "section": "",
    "text": "Para instalar R ‚Ä¶",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>¬† <span class='chapter-title'>Instalaci√≥n</span>"
    ]
  },
  {
    "objectID": "1001_visualization.html",
    "href": "1001_visualization.html",
    "title": "Visualizaci√≥n",
    "section": "",
    "text": "Objetivos",
    "crumbs": [
      "Visualizaci√≥n"
    ]
  },
  {
    "objectID": "1001_visualization.html#objetivos",
    "href": "1001_visualization.html#objetivos",
    "title": "Visualizaci√≥n",
    "section": "",
    "text": "Entender la necesidad de comunicar nuestros datos de una forma clara\nAprender algunos de los principios de la visualizaci√≥n de datos\nAprender a elegir el gr√°fico adecuado para nuestros datos y nuestros objetivos\nEntender la gram√°tica de gr√°ficos y su implicaci√≥n dentro de {ggplot2}\nCrear gr√°ficos sencillos pero comunicativos con {ggplot2}",
    "crumbs": [
      "Visualizaci√≥n"
    ]
  },
  {
    "objectID": "1101_visualization_types.html",
    "href": "1101_visualization_types.html",
    "title": "Tipos de visualizaci√≥n",
    "section": "",
    "text": "En los siguientes cap√≠tulos nos introduciremos en los tipos de visualizaci√≥n m√°s comunes en el an√°lisis de datos. Existen muchas formas de crear una jerarqu√≠a de tipos de visualizaci√≥n, pero en este curso nos enfocaremos en una clasificaci√≥n seg√∫n el tipo de visualizaci√≥n y la cantidad de variables que se desean representar. En este sentido, la Figura¬†1 muestra una clasificaci√≥n de algunas de las visualizaciones m√°s comunes y que veremos a lo largo del curso.\n\n\n\n\n\nFig.¬†1: Clasificaci√≥n de los tipos de visualizaci√≥n. Fuente: C√©dric Scherer, rstudio::conf 2022\n\n\nEn los ejercicios de muestra, trabajaremos con el dataset de iris, que viene dentro del paquete {datasets} de R. Este dataset contiene informaci√≥n sobre 150 flores de iris, con 4 variables num√©ricas y una variable categ√≥rica que indica la especie de la flor Figura¬†2.\n\n\n\n\n\nFig.¬†2: Especies de flores del dataset iris. Fuente: Datacamp\n\n\nA continuaci√≥n mostramos la estructura del dataset utilizando la funci√≥n {skimr::skim}:\n\nC√≥digoskim(iris)\n\n\nData summary\n\n\nName\niris\n\n\nNumber of rows\n150\n\n\nNumber of columns\n5\n\n\n_______________________\n\n\n\nColumn type frequency:\n\n\n\nfactor\n1\n\n\nnumeric\n4\n\n\n________________________\n\n\n\nGroup variables\nNone\n\n\n\nVariable type: factor\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nordered\nn_unique\ntop_counts\n\n\nSpecies\n0\n1\nFALSE\n3\nset: 50, ver: 50, vir: 50\n\n\nVariable type: numeric\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nskim_variable\nn_missing\ncomplete_rate\nmean\nsd\np0\np25\np50\np75\np100\nhist\n\n\n\nSepal.Length\n0\n1\n5.84\n0.83\n4.3\n5.1\n5.80\n6.4\n7.9\n‚ñÜ‚ñá‚ñá‚ñÖ‚ñÇ\n\n\nSepal.Width\n0\n1\n3.06\n0.44\n2.0\n2.8\n3.00\n3.3\n4.4\n‚ñÅ‚ñÜ‚ñá‚ñÇ‚ñÅ\n\n\nPetal.Length\n0\n1\n3.76\n1.77\n1.0\n1.6\n4.35\n5.1\n6.9\n‚ñá‚ñÅ‚ñÜ‚ñá‚ñÇ\n\n\nPetal.Width\n0\n1\n1.20\n0.76\n0.1\n0.3\n1.30\n1.8\n2.5\n‚ñá‚ñÅ‚ñá‚ñÖ‚ñÉ\n\n\n\n\n\nEn resumen, tenemos 50 muestras de cada una de las tres especies (I. versicolor, I. setosa y I. virginica) a las cuales hemos medido cuatro variables cuantitativas.",
    "crumbs": [
      "Tipos de visualizaci√≥n"
    ]
  }
]